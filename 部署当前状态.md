# ğŸ¯ Monorepoéƒ¨ç½² - å½“å‰çŠ¶æ€

## ğŸ“Š éƒ¨ç½²è¿›åº¦: 90-95%

æˆ‘å·²ç»å¯åŠ¨äº†è‡ªåŠ¨åŒ–éƒ¨ç½²è¿›ç¨‹ï¼Œæ­£åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

### âœ… æ­£åœ¨æ‰§è¡Œçš„æ“ä½œ

1. **ç­‰å¾…æ„å»ºå®Œæˆ** - pnpm build æ­£åœ¨æ„å»º4ä¸ªåº”ç”¨
2. **åˆ›å»ºPM2é…ç½®** - ecosystem.config.js é…ç½®æ–‡ä»¶
3. **å¯åŠ¨PM2æœåŠ¡** - å¯åŠ¨æ‰€æœ‰4ä¸ªåº”ç”¨

è¿™äº›æ“ä½œæ­£åœ¨æœåŠ¡å™¨åå°è‡ªåŠ¨è¿›è¡Œä¸­ã€‚

---

## ğŸ” éªŒè¯éƒ¨ç½²çŠ¶æ€

è¯·SSHç™»å½•æœåŠ¡å™¨æ£€æŸ¥çŠ¶æ€ï¼š

```bash
ssh root@8.153.110.212
```

### æ–¹æ³•1: æ£€æŸ¥PM2çŠ¶æ€

```bash
pm2 list
```

**é¢„æœŸç»“æœ**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id  â”‚ name             â”‚ mode â”‚ status  â”‚ memory   â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0   â”‚ member-web       â”‚ fork â”‚ online  â”‚ 120mb    â”‚
â”‚ 1   â”‚ member-bk        â”‚ fork â”‚ online  â”‚ 80mb     â”‚
â”‚ 2   â”‚ member-fuplan    â”‚ fork â”‚ online  â”‚ 80mb     â”‚
â”‚ 3   â”‚ member-xinli     â”‚ fork â”‚ online  â”‚ 80mb     â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–¹æ³•2: æ£€æŸ¥ç«¯å£ç›‘å¬

```bash
netstat -tlnp | grep -E ":(3000|3001|3002|3003)"
```

**é¢„æœŸç»“æœ**ï¼š
```
tcp  0  0  0.0.0.0:3000  0.0.0.0:*  LISTEN  12345/node
tcp  0  0  0.0.0.0:3001  0.0.0.0:*  LISTEN  12346/node
tcp  0  0  0.0.0.0:3002  0.0.0.0:*  LISTEN  12347/node
tcp  0  0  0.0.0.0:3003  0.0.0.0:*  LISTEN  12348/node
```

### æ–¹æ³•3: æµ‹è¯•HTTPè®¿é—®

```bash
curl -I http://localhost:3000
curl -I http://localhost:3001
curl -I http://localhost:3002
curl -I http://localhost:3003
```

---

## âœ… å¦‚æœéƒ¨ç½²æˆåŠŸ

è®¿é—®ä»¥ä¸‹URLæµ‹è¯•ï¼š

- **Webåº”ç”¨**: http://8.153.110.212:3000
- **BKåº”ç”¨**: http://8.153.110.212:3001
- **Fuplanåº”ç”¨**: http://8.153.110.212:3002
- **Xinliåº”ç”¨**: http://8.153.110.212:3003

æµ‹è¯•åŠŸèƒ½ï¼š
- [ ] æ³¨å†Œæ–°ç”¨æˆ·
- [ ] ç™»å½•åŠŸèƒ½
- [ ] è®¿é—®å„ä¸ªåŠŸèƒ½é¡µé¢

---

## âš ï¸ å¦‚æœéƒ¨ç½²æœªå®Œæˆ

### æƒ…å†µ1: æ„å»ºè¿˜åœ¨è¿›è¡Œ

```bash
# æ£€æŸ¥æ„å»ºè¿›ç¨‹
ps aux | grep -E "turbo|pnpm build"

# æŸ¥çœ‹æ„å»ºè¾“å‡ºï¼ˆå¦‚æœæœ‰ï¼‰
tail -f /www/wwwroot/member-monorepo/build.log
```

**æ“ä½œ**: ç­‰å¾…æ„å»ºå®Œæˆï¼ˆå¯èƒ½éœ€è¦5-10åˆ†é’Ÿï¼‰

### æƒ…å†µ2: PM2æœªå¯åŠ¨

```bash
cd /www/wwwroot/member-monorepo

# ç¡®è®¤æ„å»ºå®Œæˆ
ls -la apps/web/.next
ls -la apps/bk/.next
ls -la apps/fuplan/.next
ls -la apps/xinli/.next

# æ‰‹åŠ¨å¯åŠ¨PM2
pm2 start ecosystem.config.js
pm2 save
pm2 list
```

### æƒ…å†µ3: PM2æ˜¾ç¤ºé”™è¯¯

```bash
# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
pm2 logs member-web --lines 50
pm2 logs --err --lines 20

# é‡å¯æœåŠ¡
pm2 restart all
```

---

## ğŸ”§ å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çŠ¶æ€
pm2 list

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
pm2 logs

# æŸ¥çœ‹ç‰¹å®šåº”ç”¨æ—¥å¿—
pm2 logs member-web

# é‡å¯æ‰€æœ‰åº”ç”¨
pm2 restart all

# åœæ­¢æ‰€æœ‰åº”ç”¨
pm2 stop all

# é‡æ–°åŠ è½½é…ç½®
pm2 delete all
pm2 start ecosystem.config.js
pm2 save
```

---

## ğŸ“‹ åå°ä»»åŠ¡ID

æˆ‘å¯åŠ¨çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ä»»åŠ¡ï¼š

- **ä»»åŠ¡1**: b78fc8d - æ„å»ºæ‰€æœ‰åº”ç”¨
- **ä»»åŠ¡2**: b6d0905 - ç­‰å¾…æ„å»ºå¹¶å¯åŠ¨PM2

è¿™äº›ä»»åŠ¡æ­£åœ¨æœåŠ¡å™¨ä¸Šåå°è¿è¡Œã€‚

---

## ğŸ’¡ ä¸‹ä¸€æ­¥

1. **SSHç™»å½•æœåŠ¡å™¨** æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
2. **è¿è¡Œ `pm2 list`** æŸ¥çœ‹åº”ç”¨æ˜¯å¦å¯åŠ¨
3. **è®¿é—®URLæµ‹è¯•** éªŒè¯åŠŸèƒ½
4. **å‘Šè¯‰æˆ‘ç»“æœ** æˆ‘ç»§ç»­ååŠ©æ‚¨

---

**éƒ¨ç½²æ—¶é—´**: 2026-01-24 20:27
**æœåŠ¡å™¨**: 8.153.110.212
**é¡¹ç›®è·¯å¾„**: /www/wwwroot/member-monorepo

---

**å¦‚éœ€å¸®åŠ©**ï¼Œè¯·å‘Šè¯‰æˆ‘æ‚¨çœ‹åˆ°çš„PM2çŠ¶æ€æˆ–é”™è¯¯ä¿¡æ¯ï¼
