# éƒ¨ç½²çŠ¶æ€æŠ¥å‘Šå’Œè§£å†³æ–¹æ¡ˆ

**ç”Ÿæˆæ—¶é—´:** 2026-01-23 11:40

## ğŸ“Š å½“å‰çŠ¶æ€

### GitHub é…ç½® âœ…
- âœ… Git ä»“åº“åˆå§‹åŒ–å®Œæˆ
- âœ… ä»£ç å·²æäº¤åˆ°æœ¬åœ°
- âœ… GitHub Secrets å·²é…ç½®
- âœ… SSH å¯†é’¥å·²è®¾ç½®
- âš ï¸ æœ€æ–°ä»£ç æœªæ¨é€ï¼ˆç½‘ç»œé—®é¢˜ï¼‰

### æœåŠ¡å™¨çŠ¶æ€ âš ï¸
- âš ï¸ åº”ç”¨æ— æ³•è®¿é—® (http://8.153.110.212:3000)
- â“ PM2 çŠ¶æ€æœªçŸ¥
- â“ æ„å»ºæ˜¯å¦å®ŒæˆæœªçŸ¥

### GitHub Actions ğŸ”„
- ç®€åŒ–ç‰ˆéƒ¨ç½²: å¯èƒ½è¶…æ—¶
- ä¼˜åŒ–ç‰ˆéƒ¨ç½²: å·²åˆ›å»ºä½†æœªæ¨é€

## ğŸ” é—®é¢˜åˆ†æ

### ä¸»è¦é—®é¢˜
1. **npm build åœ¨æœåŠ¡å™¨ä¸Šå¤ªæ…¢** - Next.js æ„å»ºéœ€è¦å¤§é‡æ—¶é—´å’Œå†…å­˜
2. **GitHub Actions è¶…æ—¶** - å³ä½¿è®¾ç½®30åˆ†é’Ÿä¹Ÿå¯èƒ½ä¸å¤Ÿ
3. **SSH è¿æ¥ä¸ç¨³å®š** - æ‰‹åŠ¨æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€å›°éš¾

### æ ¹æœ¬åŸå› 
æœåŠ¡å™¨èµ„æºæœ‰é™,ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Š `npm run build` å¯¼è‡´:
- æ„å»ºæ—¶é—´è¿‡é•¿ (20-30åˆ†é’Ÿ+)
- å¯èƒ½å†…å­˜æº¢å‡º
- GitHub Actions è¶…æ—¶

## âœ… è§£å†³æ–¹æ¡ˆ (3æ­¥)

### æ–¹æ¡ˆ 1: ä¼˜åŒ–ç‰ˆéƒ¨ç½² (æ¨è) â­

**åŸç†:** åœ¨ GitHub Actions å¼ºå¤§çš„æœåŠ¡å™¨ä¸Šæ„å»º,ç„¶ååªä¼ è¾“æ„å»ºç»“æœ

**ä¼˜ç‚¹:**
- âš¡ æ„å»ºé€Ÿåº¦å¿« (2-3åˆ†é’Ÿ)
- ğŸ¯ éƒ¨ç½²æ—¶é—´çŸ­ (1-2åˆ†é’Ÿ)
- ğŸ’¾ èŠ‚çœæœåŠ¡å™¨èµ„æº
- âœ… æ›´å¯é 

**é…ç½®æ–‡ä»¶:** `.github/workflows/deploy-optimized.yml` (å·²åˆ›å»º)

**å¾…åŠäº‹é¡¹:**
```bash
# ç­‰ç½‘ç»œæ¢å¤åæ‰§è¡Œ
cd "C:\Users\yushu\Desktop\æˆ‘çš„ä¼šå‘˜ä½“ç³»"
git push
```

æ¨é€æˆåŠŸå,GitHub Actions ä¼šè‡ªåŠ¨:
1. åœ¨ GitHub æœåŠ¡å™¨ä¸Š `npm ci` (å®‰è£…ä¾èµ–)
2. åœ¨ GitHub æœåŠ¡å™¨ä¸Š `npm run build` (å¿«é€Ÿæ„å»º)
3. é€šè¿‡ SCP ä¼ è¾“ `.next` ç­‰æ–‡ä»¶åˆ°æœåŠ¡å™¨
4. åœ¨æœåŠ¡å™¨ä¸Šåªå®‰è£…ç”Ÿäº§ä¾èµ–
5. é‡å¯ PM2

### æ–¹æ¡ˆ 2: æœ¬åœ°æ„å»ºä¸Šä¼ 

**åŸç†:** åœ¨æœ¬åœ° Windows ç”µè„‘æ„å»º,ä¸Šä¼ åˆ°æœåŠ¡å™¨

**æ­¥éª¤:**
```bash
# åœ¨æœ¬åœ°
cd member-system
npm install
npm run build

# å‹ç¼©æ„å»ºç»“æœ
tar -czf build.tar.gz .next package.json package-lock.json ecosystem.config.js

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp build.tar.gz root@8.153.110.212:/tmp/

# SSH åˆ°æœåŠ¡å™¨
ssh root@8.153.110.212
cd /www/wwwroot/member-system
tar -xzf /tmp/build.tar.gz
npm ci --only=production
pm2 restart member-system
```

### æ–¹æ¡ˆ 3: ç›´æ¥åœ¨æœåŠ¡å™¨ä¿®å¤

å¦‚æœå½“å‰éƒ¨ç½²å¡ä½äº†,æ‰‹åŠ¨ä¿®å¤:

```bash
# SSH ç™»å½•
ssh root@8.153.110.212

# æ£€æŸ¥çŠ¶æ€
pm2 status
pm2 logs member-system --lines 50

# å¦‚æœæ„å»ºå¤±è´¥,æ‰‹åŠ¨æ„å»º
cd /www/wwwroot/member-system
export NODE_OPTIONS="--max-old-space-size=2048"
npm run build

# å¯åŠ¨
pm2 restart member-system
pm2 save
```

## ğŸ“ å¾…åŠæ¸…å•

### ç«‹å³æ‰§è¡Œ
- [ ] ç­‰å¾…ç½‘ç»œæ¢å¤
- [ ] æ¨é€ä¼˜åŒ–ç‰ˆéƒ¨ç½²é…ç½®: `git push`
- [ ] è§¦å‘ GitHub Actions éƒ¨ç½²

### å¤‡é€‰æ–¹æ¡ˆ
å¦‚æœ GitHub ç½‘ç»œæŒç»­æœ‰é—®é¢˜:
- [ ] ä½¿ç”¨æ–¹æ¡ˆ2: æœ¬åœ°æ„å»ºä¸Šä¼ 
- [ ] æˆ–ä½¿ç”¨æ–¹æ¡ˆ3: SSH æ‰‹åŠ¨ä¿®å¤

### é•¿æœŸä¼˜åŒ–
- [ ] è€ƒè™‘ä½¿ç”¨ Vercel/Netlify ç­‰ Serverless å¹³å°
- [ ] æˆ–å‡çº§æœåŠ¡å™¨é…ç½® (å¢åŠ å†…å­˜)
- [ ] é…ç½® CDN åŠ é€Ÿ

## ğŸ¯ æ¨èæ‰§è¡Œé¡ºåº

1. **ç¬¬ä¸€æ­¥:** ç­‰ç½‘ç»œæ¢å¤,æ‰§è¡Œ `git push`
2. **ç¬¬äºŒæ­¥:** è®¿é—® https://github.com/yushuo1991/member/actions æŸ¥çœ‹éƒ¨ç½²
3. **ç¬¬ä¸‰æ­¥:** ç­‰å¾… 3-5 åˆ†é’Ÿéƒ¨ç½²å®Œæˆ
4. **ç¬¬å››æ­¥:** è®¿é—® http://8.153.110.212:3000/admin/login

## ğŸ“ å¦‚ä½•æ£€æŸ¥çŠ¶æ€

### æ£€æŸ¥ GitHub Actions
```bash
# æ–¹æ³•1: å‘½ä»¤è¡Œ
gh run list --repo yushuo1991/member --workflow="deploy-optimized.yml" --limit 1

# æ–¹æ³•2: ç½‘é¡µ
è®¿é—®: https://github.com/yushuo1991/member/actions
```

### æ£€æŸ¥æœåŠ¡å™¨
```bash
# æ–¹æ³•1: SSH ç™»å½•
ssh root@8.153.110.212
pm2 status
pm2 logs member-system

# æ–¹æ³•2: æµ‹è¯•ç«¯å£
curl -I http://8.153.110.212:3000
```

### æ£€æŸ¥åº”ç”¨
```bash
# æµè§ˆå™¨è®¿é—®
http://8.153.110.212:3000/admin/login

# ç™»å½•ä¿¡æ¯
ç”¨æˆ·å: admin
å¯†ç : 7287843Wu
```

## ğŸ’¡ ä¸ºä»€ä¹ˆä¼˜åŒ–ç‰ˆæ›´å¥½?

### å½“å‰æ–¹æ¡ˆ (Simple)
```
GitHub â†’ é€šçŸ¥æœåŠ¡å™¨ â†’ æœåŠ¡å™¨ git pull â†’ æœåŠ¡å™¨ npm ci (5åˆ†é’Ÿ)
â†’ æœåŠ¡å™¨ npm build (25åˆ†é’Ÿ) â†’ è¶…æ—¶å¤±è´¥ âŒ
```

### ä¼˜åŒ–æ–¹æ¡ˆ (Optimized)
```
GitHub â†’ GitHubæœåŠ¡å™¨ npm ci (1åˆ†é’Ÿ) â†’ GitHubæœåŠ¡å™¨ npm build (2åˆ†é’Ÿ)
â†’ ä¼ è¾“.nextåˆ°æœåŠ¡å™¨ (30ç§’) â†’ æœåŠ¡å™¨ npm ci --only=production (1åˆ†é’Ÿ)
â†’ PM2 é‡å¯ (5ç§’) â†’ æˆåŠŸ âœ…
```

**æ—¶é—´å¯¹æ¯”:**
- å½“å‰: 30åˆ†é’Ÿ+ (ç»å¸¸è¶…æ—¶)
- ä¼˜åŒ–: 4-5åˆ†é’Ÿ (ç¨³å®šæˆåŠŸ)

## ğŸš€ ä¸‹ä¸€æ­¥

**ç½‘ç»œæ¢å¤å,åªéœ€ä¸€æ¡å‘½ä»¤:**
```bash
cd "C:\Users\yushu\Desktop\æˆ‘çš„ä¼šå‘˜ä½“ç³»" && git push
```

ç„¶åç­‰å¾… 5 åˆ†é’Ÿ,è®¿é—®ç³»ç»Ÿå³å¯! ğŸ‰
