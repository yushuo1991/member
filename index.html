<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®‡ç¡•çŸ­çº¿ SaaS å¹³å°</title>

    <!-- React & ReactDOM (UMD) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel Standalone (JSX è½¬è¯‘) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind é…ç½® -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#fffbf5',
                            100: '#ffefe0',
                            200: '#ffd6b3',
                            300: '#ffb380',
                            400: '#ff8c42', // ä¸»è‰²
                            500: '#ff6b1a',
                            600: '#f04f00',
                            900: '#2d1b0e',
                        }
                    },
                    boxShadow: {
                        'card': '0 10px 30px -5px rgba(0,0,0,0.1)',
                        'glass': '0 8px 32px rgba(0, 0, 0, 0.1)',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #F5F7FA;
            color: #1d1d1f;
            -webkit-font-smoothing: antialiased;
        }

        /* ç£¨ç ‚ç»ç’ƒæ•ˆæœ */
        .glass-effect {
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.85);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* åŠ¨ç”» */
        @keyframes slide-in {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-slide-in {
            animation: slide-in 0.3s ease-out;
        }

        .animate-fade-in {
            animation: fade-in 0.4s ease-out;
        }

        /* é¡µé¢åˆ‡æ¢åŠ¨ç”» */
        .page-transition {
            animation: fade-in 0.3s ease-out;
        }

        /* äº§å“å¡ç‰‡æ‚¬åœæ•ˆæœ */
        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        @media (min-width: 768px) {
            .product-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
            }
        }

        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        .product-card:active {
            transform: scale(0.98);
        }

        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ==================== å¸¸é‡é…ç½® ====================

        const STORAGE_KEYS = {
            USERS: 'ys_users',
            ACTIVATION_CODES: 'ys_activation_codes',
            SESSION_USER: 'ys_session_user'
        };

        // äº§å“é…ç½®
        const PRODUCTS = {
            'learning-circle': {
                id: 'learning-circle',
                name: 'å­¦ä¹ åœˆ',
                desc: 'ç§å¯†å­¦ä¹ åœˆï¼Œ9å¤§æ ¸å¿ƒæƒç›Š',
                price: '799å…ƒ/æœˆ',
                icon: 'ğŸ‘¥',
                color: 'from-orange-50 to-white',
                borderColor: 'border-orange-100',
                textColor: 'text-orange-600',
                bgColor: 'bg-white',
                iconBg: 'bg-white',
                requiredTier: ['monthly', 'quarterly', 'yearly'],
                canBuyout: false
            },
            'emotion-table': {
                id: 'emotion-table',
                name: 'æƒ…ç»ªè¡¨æ ¼',
                desc: '8å¤§æ ¸å¿ƒè¡¨æ ¼ï¼Œçœ‹é€å¸‚åœºæƒ…ç»ª',
                price: '600å…ƒä¹°æ–­',
                icon: 'ğŸ“Š',
                color: 'bg-white',
                borderColor: 'border-gray-100',
                textColor: 'text-blue-600',
                bgColor: 'bg-white',
                iconBg: 'bg-blue-50',
                requiredTier: [],
                canBuyout: true
            },
            'sector-assistant': {
                id: 'sector-assistant',
                name: 'æ¿å—åŠ©æ‰‹',
                desc: 'è‡ªåŠ¨åŒ–å¤ç›˜ç¥å™¨',
                price: 'åŒ…å«åœ¨ä¼šå‘˜ä¸­',
                icon: 'ğŸ’»',
                color: 'bg-[#111]',
                borderColor: 'border-gray-800',
                textColor: 'text-green-400',
                bgColor: 'bg-[#111]',
                iconBg: 'bg-gray-800',
                requiredTier: ['monthly', 'quarterly', 'yearly'],
                canBuyout: false
            },
            'sector-rhythm': {
                id: 'sector-rhythm',
                name: 'æ¿å—èŠ‚å¥ç³»ç»Ÿ',
                desc: 'æ™ºèƒ½è¯†åˆ«æ¿å—ç”Ÿå‘½å‘¨æœŸ',
                price: 'åŒ…å«åœ¨å­£åº¦/å¹´è´¹ä¼šå‘˜',
                icon: 'ğŸµ',
                color: 'bg-white',
                borderColor: 'border-purple-100',
                textColor: 'text-purple-600',
                bgColor: 'bg-white',
                iconBg: 'bg-purple-50',
                requiredTier: ['quarterly', 'yearly'],
                canBuyout: false
            },
            'review-system': {
                id: 'review-system',
                name: 'å¤ç›˜ç³»ç»Ÿ',
                desc: 'äº¤æ˜“æ—¥å¿—ä¸æ•°æ®åˆ†æ',
                price: 'åŒ…å«åœ¨å¹´è´¹ä¼šå‘˜',
                icon: 'ğŸ“',
                color: 'bg-white',
                borderColor: 'border-indigo-100',
                textColor: 'text-indigo-600',
                bgColor: 'bg-white',
                iconBg: 'bg-indigo-50',
                requiredTier: ['yearly'],
                canBuyout: false
            },
            'psychology-test': {
                id: 'psychology-test',
                name: 'å¿ƒç†æµ‹è¯„ç³»ç»Ÿ',
                desc: 'äº¤æ˜“å¿ƒç†ä¸“ä¸šè¯„ä¼°',
                price: 'åŒ…å«åœ¨å¹´è´¹ä¼šå‘˜',
                icon: 'ğŸ§ ',
                color: 'bg-white',
                borderColor: 'border-teal-100',
                textColor: 'text-teal-600',
                bgColor: 'bg-white',
                iconBg: 'bg-teal-50',
                requiredTier: ['yearly'],
                canBuyout: false
            }
        };

        // äº§å“è¯¦ç»†å†…å®¹é…ç½®
        const getProductDetails = (productId) => {
            const details = {
                'learning-circle': {
                    features: [
                        { icon: 'ğŸ“š', title: 'å®šåˆ¶å­¦ä¹ è·¯å¾„', desc: 'æ ¹æ®åŸºç¡€å®šåˆ¶è·¯çº¿ï¼Œè¶…æ·å¾„æœ€å¿«å…¥é—¨ï¼Œå…¥é—¨å³é«˜æ‰‹' },
                        { icon: 'ğŸ§ ', title: 'ä¸»æµçŸ­çº¿æ€ç»´', desc: 'ç†è§£åŠ›èƒœäºæ¨¡å¼ã€‚èšç„¦ä¸»çº¿ï¼Œæ‰“ç£¨ä¸‰å¥—æ ¸å¿ƒæ¨¡å¼' },
                        { icon: 'ğŸ“°', title: 'ç›˜å‰ç²¾é€‰æ—©æŠ¥', desc: 'æ¯æ—¥è§†é¢‘ç²¾é€‰å…³é”®èµ„è®¯ï¼Œæå‰è·æ‚‰å¸‚åœºåŠ¨æ€' },
                        { icon: 'â±ï¸', title: 'ç›˜ä¸­å®æ—¶è§£ç›˜', desc: 'åŠ¨æ€è§£è¯»æƒ…ç»ªï¼Œä»å›æµ‹ã€é£æ ¼ã€æ ¸å¿ƒèšç„¦ï¼Œæ•æ‰æœºä¼š' },
                        { icon: 'ğŸ”„', title: 'ç›˜åæ·±åº¦å¤ç›˜', desc: 'ç²¾é€‰æ¯æ—¥è§†é¢‘è§£æèµ°åŠ¿ï¼Œæ€»ç»“è§„å¾‹ï¼ŒåŠ©ä½ æå‡ç›˜æ„Ÿ' },
                        { icon: 'ğŸ’¬', title: 'æƒ…ç»ªèŠ‚ç‚¹è®¨è®º', desc: 'å¯¹å½“ä¸‹æƒ…ç»ªèŠ‚ç‚¹å®šæ€§ï¼Œå‚ä¸æ–¹å‘çš„å…±åŒè®¨è®º' },
                        { icon: 'ğŸ’¡', title: 'æ—©æ™šçŸ¥è¯†å¡ç‰‡', desc: 'æ¨é€æ¸¸èµ„å‰è¾ˆè¯­å½•ï¼Œåˆ©ç”¨ç¢ç‰‡æ—¶é—´æ‹“å±•è®¤çŸ¥è¾¹ç•Œ' },
                        { icon: 'ğŸ’»', title: 'æ¿å—åŠ©æ‰‹(å…è´¹)', desc: 'åœˆå†…æˆå‘˜å…è´¹ä½¿ç”¨ã€‚ä¸€é”®æ•´ç†çƒ­é—¨æ¿å—ã€æ ¸å¿ƒä¸ªè‚¡' },
                        { icon: 'ğŸ¤–', title: 'AI çŸ¥è¯†åº“', desc: 'å–‚å…¥13,000+ç¯‡å¹²è´§ï¼Œéšæ—¶æé—®ï¼ŒAIç§’å›è§£ç­”' }
                    ]
                },
                'emotion-table': {
                    features: [
                        {
                            icon: 'ğŸ“Š',
                            title: 'è¡¨A1ï¼šå¸‚åœºæ•´ä½“æ•°æ®ï¼ˆè‡ª2020å¹´åº•ï¼‰',
                            desc: 'ååº”å¸‚åœºçš„æ•´ä½“æƒ…å†µï¼Œå·¦ä¾§ä¸»è¦æ˜¯ååº”å¸‚åœºæ•´ä½“åŠ¿èƒ½ï¼Œå³ä¾§ä¸»è¦ååº”å¸‚åœºæ•´ä½“åŠ¨èƒ½ã€‚ä¸¤è€…å…±æŒ¯å¯ååº”å…±æŒ¯å†°æˆ–å…±æŒ¯é«˜æ½®ï¼Œæç¤ºæœºä¼šä¸é£é™©ï¼Œå·¦å³ä¸å¹³è¡¡å¯ååº”å¤§ç›˜ä¸æƒ…ç»ªèƒŒç¦»ã€‚åº•è‰²æ˜¯è‡ªåŠ¨å¡«å……çš„ï¼Œåº•è‰²ä¸€å®šç¨‹åº¦ä¸Šè¡¨è¾¾äº†å†å²æå€¼æ•°æ®ï¼Œå¯é¢„åˆ¤æ¬¡æ—¥åˆ†æ­§æƒ…å†µã€‚çº¢è‰²ç½‘æ ¼åº•çº¹å’Œç»¿è‰²ç½‘æ ¼åº•çº¹è¡¨ç¤ºåœ¨æ•´å¼ æ•°æ®è¡¨æ ¼ä¸­ï¼ˆ3å¹´ï¼‰æ•°æ®å¤„äºæå€¼10%ï¼Œå‡†ç¡®æ€§é«˜ï¼Œæ˜¯æˆ‘æ—¥å¸¸å‚ç…§çš„é‡è¦æŒ‡æ ‡ä¹‹ä¸€ã€‚æœ€å³ä¾§éƒ¨åˆ†æ˜¯å½“å¤©æ¶¨åœä¸ªè‚¡å¤§äº4çš„æ¿å—ï¼Œæ ‡æ³¨å¥½é¢œè‰²åå¯ååº”æ¿å—æƒ…å†µï¼Œé…åˆåç»­è¡¨æ ¼æœ‰ä¸ªå°è±¡ã€‚',
                            image: 'https://wuqq-obsidian.oss-cn-shanghai.aliyuncs.com/obsidian%E5%9B%BE%E7%89%87/20231120155629.png'
                        },
                        {
                            icon: 'ğŸš¨',
                            title: 'è¡¨A2ï¼šè¿æ¿æ•°æ®æº¢ä»·',
                            desc: 'æ­¤è¡¨æ ¼è®°å½•å¸‚åœº2æ¿ä»¥ä¸Šä¸ªè‚¡åŠ20cmé¦–æ¿ä¸ªè‚¡çš„æº¢ä»·æƒ…å†µã€‚1ã€ç”¨äºç›´è§‚ååº”æ•´ä½“æƒ…å†µçš„å¤šç©ºã€‚2ã€å½“è¿‘æœŸæ´»è·ƒä¸ªè‚¡å‡ºç°é»‘è‰²å—è·Œåœï¼Œåˆ™å¯èƒ½æ˜¯å¹å“¨ã€‚3ã€ä¹Ÿå¯çœ‹é€€æ½®æœŸçš„æ´»å£ä¸åŠæ´»å£ã€‚4ã€åœ¨å†å²å¤ç›˜ä¸­ï¼ŒåµŒå…¥æ ¸å¿ƒä¸ªè‚¡çš„åˆ†æ—¶å›¾ï¼Œé¼ æ ‡æ‚¬åœå¯ç°ï¼Œæ–¹ä¾¿å›é¡¾å‘¨æœŸã€‚5ã€å¯çºµå‘ç­›é€‰å½“å¤©çš„äºé’±æ•ˆåº”ä¸ªè‚¡ï¼Œä»¥çœ‹å…¶å¯¹åº”çš„æ¿å—ï¼Œä¹Ÿå¯æ¨ªå‘ç­›é€‰æŸé¢˜ææ¿å—ï¼Œçœ‹å…¶æ¿å—èŠ‚å¥ã€‚6ã€æ©™è‰²ä¸ºåˆ›ä¸šæ¿ä¸ªè‚¡ï¼Œç´«è‰²ä¸ºç§‘åˆ›æ¿ä¸ªè‚¡ã€‚',
                            image: 'https://wuqq-obsidian.oss-cn-shanghai.aliyuncs.com/obsidian%E5%9B%BE%E7%89%87/72cfe5ac5510436e9c28366a78ca2ee.png'
                        },
                        {
                            icon: 'âš–ï¸',
                            title: 'è¡¨æ ¼A3ï¼šæƒ…ç»ªæº¢ä»·æ•°æ®ç»Ÿè®¡',
                            desc: 'é€šè¿‡é¦–æ¿å’Œè¿æ¿çš„æ•°æ®æƒ…å†µï¼Œååº”æƒ…ç»ªã€‚æ ¹æ®ä¸€å®šçš„æƒé‡æ¯”ä¾‹å…¬å¼è®¡ç®—æƒ…ç»ªé˜¶æ®µï¼Œæˆ‘ä½œä¸ºå‚è€ƒä½¿ç”¨çš„ã€‚å…¬å¼è®¡ç®—çš„ç»“æœä¸å¦‚è‡ªå·±æŸ¥çœ‹æ•°æ®ååˆ¤æ–­çš„çµæ•ã€‚',
                            image: 'https://wuqq-obsidian.oss-cn-shanghai.aliyuncs.com/obsidian%E5%9B%BE%E7%89%87/20231120162317.png'
                        },
                        {
                            icon: 'ğŸ“ˆ',
                            title: 'è¡¨æ ¼A4ï¼šæœ€é«˜è¿æ¿åŠæº¢ä»·',
                            desc: 'æŸ¥çœ‹ï¼šæ™‹çº§å‘å³ä¸Šï¼Œæ‰é˜Ÿå‘å³ä¸‹ã€‚ä½œç”¨ï¼šç”¨äºè®°å½•æœ€é«˜æ¿çš„é«˜åº¦åŠæ–­æ¿æº¢ä»·æƒ…å†µï¼Œæ–¹ä¾¿æŸ¥çœ‹é«˜åº¦å‹åˆ¶ä¸åšç©ºåŠ¨èƒ½é€†è½¬ã€‚è¡¨æ ¼éšè—æº¢ä»·åï¼Œçœ‹åˆ°çš„å°±æ˜¯æ¿å—é«˜åº¦å›¾ã€‚',
                            image: 'https://wuqq-obsidian.oss-cn-shanghai.aliyuncs.com/obsidian%E5%9B%BE%E7%89%87/20231120162603.png'
                        },
                        {
                            icon: 'ğŸ¯',
                            title: 'è¡¨æ ¼5ï¼šæ¿å—å¼ºåº¦',
                            desc: 'æ•°æ®æºä¸ºå¼€ç›˜å•¦æ¿å—å¼ºåº¦ï¼Œç”¨äºæŸ¥çœ‹æ¿å—è½®åŠ¨æƒ…å†µã€‚é‡ç‚¹æ¿å—å¯ç”¨è½¯ä»¶æŸ¥çœ‹å…¶ç»†åˆ†æ¦‚å¿µçš„å¼ºåº¦å’Œå¯¹åº”ä¸ªè‚¡ã€‚',
                            image: 'https://wuqq-obsidian.oss-cn-shanghai.aliyuncs.com/obsidian%E5%9B%BE%E7%89%87/20231120162758.png'
                        },
                        {
                            icon: 'ğŸ”',
                            title: 'è¡¨æ ¼6ï¼šæ¿å—æ¢¯é˜Ÿ',
                            desc: 'ç”¨äºæŸ¥çœ‹è¿‘æœŸæ´»è·ƒæ¿å—çš„æº¢ä»·æƒ…å†µï¼Œæ¨ªå‘çœ‹ï¼Œä¸€æ ä¸ºä¸€ä¸ªé¢˜æï¼Œä¸ªè‚¡é¡ºåºæŒ‰ç…§é¦–å°æ—¶é—´æ’åºï¼Œå¯ä»¥æ¸…æ™°çš„çœ‹å‡ºæ¥æ¿å—çš„èŠ‚å¥å’Œä¸ªè‚¡çš„æ¬¡æ—¥åŠç¬¬ä¸‰æ—¥æº¢ä»·æƒ…å†µã€‚å¯ä»¥çœ‹æ¿å—èŠ‚å¥ï¼Œä¹Ÿå¯ä»¥çœ‹æ¿å—é—´çš„ç«äº‰æƒ…å†µã€‚',
                            image: 'https://wuqq-obsidian.oss-cn-shanghai.aliyuncs.com/obsidian%E5%9B%BE%E7%89%87/20231120162904.png'
                        },
                        {
                            icon: 'ğŸ’',
                            title: 'è¡¨æ ¼7ï¼šè¿æ¿ä¸ªè‚¡æº¢ä»·æƒ…å†µ',
                            desc: 'è®°å½•è¿æ¿ä¸ªè‚¡çš„å±æ€§åŠåä¸¤æ—¥æº¢ä»·æƒ…å†µï¼Œç›´è§‚çš„ååº”æƒ…ç»ªã€‚å…¶ä¸­ä¸ªè‚¡åç§°è“åº•ä»£è¡¨ä¸€å­—æ¿ï¼Œç»¿åº•ä»£è¡¨Tå­—æ¿ã€‚æ²¡æœ‰å‚è€ƒä»·å€¼çš„æ•°æ®å·²éšå±‚ã€‚ä¸‹æ–¹æ˜¯ååŒ…æ¿åŠæº¢ä»·æƒ…å†µã€‚',
                            image: 'https://wuqq-obsidian.oss-cn-shanghai.aliyuncs.com/obsidian%E5%9B%BE%E7%89%87/20231120152139.png'
                        },
                        {
                            icon: 'ğŸ“‰',
                            title: 'è¡¨æ ¼8ï¼šè¶‹åŠ¿æ¿å—åŠä¸ªè‚¡ï¼ˆæœªå¯ç”¨å¯å‚è€ƒï¼‰',
                            desc: 'æŒ‰åŒºé—´æ¶¨å¹…æ’è¡Œçš„æ¿å—å’Œä¸ªè‚¡ï¼Œä»¥åŠæº¢ä»·æƒ…å†µï¼Œç”¨äºè¶‹åŠ¿è¡Œæƒ…çš„æ ¸å¿ƒä¸ªè‚¡æ•æ‰ã€‚',
                            image: 'https://wuqq-obsidian.oss-cn-shanghai.aliyuncs.com/obsidian%E5%9B%BE%E7%89%87/20231120163424.png'
                        }
                    ],
                    videoUrl: 'https://mp.weixin.qq.com/s/J4ixYxRY7FN4DWaVaSlPyg?mpshare=1&scene=1&srcid=0105jUXKSWzDt0pRUkQdwsWL&sharer_shareinfo=498a87bde624da3a9d0343925e914ba0&sharer_shareinfo_first=498a87bde624da3a9d0343925e914ba0&from=industrynews&color_scheme=light#rd',
                    videoTitle: 'æ•°æ®è¡¨æ ¼çš„è®¾è®¡æ€è·¯åŠè§£è¯»ï¼ˆå«å¿«é€Ÿå½•å…¥æ¼”ç¤ºï¼‰å…±30åˆ†é’Ÿ'
                },
                'sector-assistant': {
                    features: [
                        { icon: 'ğŸ¤–', title: 'è‡ªåŠ¨åŒ–å¤ç›˜', desc: 'æ¯æ—¥è‡ªåŠ¨ç”Ÿæˆæ¿å—å¤ç›˜æŠ¥å‘Šï¼ŒèŠ‚çœ1å°æ—¶æ‰‹åŠ¨æ•´ç†' },
                        { icon: 'ğŸ“Š', title: 'æ¿å—åˆ†æ', desc: 'æ¿å—å¼ºåº¦ã€æŒç»­æ€§æ™ºèƒ½è¯„åˆ†ï¼Œå¿«é€Ÿå®šä½ä¼˜è´¨æ¿å—' },
                        { icon: 'ğŸ¯', title: 'é¾™å¤´è¿½è¸ª', desc: 'è‡ªåŠ¨è¿½è¸ªæ¿å—é¾™å¤´è‚¡èµ°åŠ¿ï¼Œå®æ—¶æŒæ¡ä¸»çº¿åŠ¨å‘' },
                        { icon: 'ğŸ“ˆ', title: 'æ¶¨åœåˆ†æ', desc: 'æ¶¨åœè‚¡æ¿å—å½’ç±»ä¸åˆ†æï¼Œå‘ç°æ¿å—è½®åŠ¨æœºä¼š' },
                        { icon: 'ğŸ’¡', title: 'æœºä¼šæŒ–æ˜', desc: 'æ½œåœ¨æ¿å—æœºä¼šæ™ºèƒ½æŒ–æ˜ï¼Œæå‰å¸ƒå±€ä¸‹ä¸€ä¸ªçƒ­ç‚¹' },
                        { icon: 'ğŸ””', title: 'å®æ—¶æ¨é€', desc: 'é‡è¦æ¿å—å¼‚åŠ¨å®æ—¶æé†’ï¼Œä¸é”™è¿‡ä»»ä½•äº¤æ˜“æœºä¼š' }
                    ]
                },
                'sector-rhythm': {
                    features: [
                        { icon: 'ğŸµ', title: 'èŠ‚å¥è¯†åˆ«', desc: 'æ™ºèƒ½è¯†åˆ«æ¿å—å¯åŠ¨ã€åŠ é€Ÿã€è¡°é€€ä¸‰å¤§é˜¶æ®µï¼ŒæŠŠæ¡æœ€ä½³æ—¶æœº' },
                        { icon: 'ğŸ“Š', title: 'ç”Ÿå‘½å‘¨æœŸå¯è§†åŒ–', desc: 'æ¿å—ä»å¯åŠ¨åˆ°ç»“æŸçš„å®Œæ•´è¿‡ç¨‹å›¾è¡¨ï¼Œç›´è§‚å±•ç¤º' },
                        { icon: 'â°', title: 'æœ€ä½³æ—¶æœºæç¤º', desc: 'æ™ºèƒ½æç¤ºä¹°å…¥ã€åŠ ä»“ã€å‡ä»“ã€æ¸…ä»“æ—¶æœºï¼Œé¿å…è¿½æ¶¨æ€è·Œ' },
                        { icon: 'ğŸ”„', title: 'è½®åŠ¨åˆ†æ', desc: 'è¿½è¸ªå¸‚åœºçƒ­ç‚¹æ¿å—è½®åŠ¨è§„å¾‹ï¼Œé¢„åˆ¤ä¸‹ä¸€ä¸ªçƒ­ç‚¹æ–¹å‘' },
                        { icon: 'ğŸ“ˆ', title: 'å¼ºåº¦åŠ¨æ€è¯„åˆ†', desc: 'å®æ—¶è¯„ä¼°æ¿å—å¼ºåº¦å˜åŒ–ï¼Œé‡åŒ–æ¿å—è¡¨ç°' },
                        { icon: 'ğŸ¯', title: 'å‚ä¸ç­–ç•¥å»ºè®®', desc: 'ä¸åŒèŠ‚å¥é˜¶æ®µçš„å…·ä½“æ“ä½œå»ºè®®ï¼Œæ–°æ‰‹ä¹Ÿèƒ½è½»æ¾ä¸Šæ‰‹' }
                    ]
                },
                'review-system': {
                    features: [
                        { icon: 'ğŸ“', title: 'äº¤æ˜“æ—¥å¿—', desc: 'è¯¦ç»†è®°å½•æ¯ç¬”äº¤æ˜“å…¨è¿‡ç¨‹ï¼šä¹°å…¥ç†ç”±ã€å¿ƒæ€ã€æ‰§è¡Œæƒ…å†µ' },
                        { icon: 'ğŸ“Š', title: 'æ•°æ®ç»Ÿè®¡', desc: 'è‡ªåŠ¨è®¡ç®—èƒœç‡ã€ç›ˆäºæ¯”ã€æœ€å¤§å›æ’¤ç­‰å…³é”®æŒ‡æ ‡' },
                        { icon: 'ğŸ¯', title: 'é—®é¢˜è¯Šæ–­', desc: 'AI è‡ªåŠ¨è¯Šæ–­äº¤æ˜“ä¸­çš„å¸¸è§é—®é¢˜ï¼šè¿½æ¶¨æ€è·Œã€æ­¢æŸä¸åŠæ—¶ç­‰' },
                        { icon: 'ğŸ’¡', title: 'æ”¹è¿›å»ºè®®', desc: 'åŸºäºäº¤æ˜“æ•°æ®ç»™å‡ºä¸ªæ€§åŒ–æ”¹è¿›å»ºè®®ï¼ŒæŒç»­ä¼˜åŒ–ç­–ç•¥' },
                        { icon: 'ğŸ“ˆ', title: 'æˆé•¿æ›²çº¿', desc: 'å¯è§†åŒ–å±•ç¤ºäº¤æ˜“èƒ½åŠ›æˆé•¿è½¨è¿¹ï¼Œè§è¯è‡ªå·±çš„è¿›æ­¥' },
                        { icon: 'ğŸ†', title: 'æˆå°±ç³»ç»Ÿ', desc: 'è®¾å®šç›®æ ‡ï¼Œè®°å½•äº¤æ˜“é‡Œç¨‹ç¢‘ï¼Œæ¿€åŠ±æŒç»­è¿›æ­¥' }
                    ]
                },
                'psychology-test': {
                    features: [
                        { icon: 'ğŸ§ ', title: 'å¿ƒç†æµ‹è¯„', desc: 'å¤šç»´åº¦è¯„ä¼°äº¤æ˜“å¿ƒç†çŠ¶æ€ï¼šé£é™©åå¥½ã€æƒ…ç»ªæ§åˆ¶ã€å†³ç­–é£æ ¼' },
                        { icon: 'ğŸ˜Œ', title: 'æƒ…ç»ªç®¡ç†', desc: 'è¯†åˆ«å¹¶ç®¡ç†äº¤æ˜“ä¸­çš„ææƒ§ã€è´ªå©ªç­‰æƒ…ç»ªï¼Œå»ºç«‹ç¨³å®šå¿ƒæ€' },
                        { icon: 'ğŸ’ª', title: 'å¿ƒæ€è®­ç»ƒ', desc: 'é€šè¿‡ç»ƒä¹ å’Œåæ€å»ºç«‹ç¨³å®šçš„äº¤æ˜“å¿ƒæ€ï¼Œå…‹æœå¿ƒç†å¼±ç‚¹' },
                        { icon: 'ğŸ“Š', title: 'å¿ƒç†æŠ¥å‘Š', desc: 'ç”Ÿæˆè¯¦ç»†çš„å¿ƒç†åˆ†ææŠ¥å‘Šå’Œå»ºè®®ï¼Œæ·±å…¥äº†è§£è‡ªå·±' },
                        { icon: 'ğŸ¯', title: 'å¼±ç‚¹è¯†åˆ«', desc: 'æ‰¾å‡ºå½±å“äº¤æ˜“è¡¨ç°çš„å¿ƒç†å¼±ç‚¹ï¼Œé’ˆå¯¹æ€§æ”¹è¿›' },
                        { icon: 'ğŸ”„', title: 'æŒç»­è·Ÿè¸ª', desc: 'é•¿æœŸè·Ÿè¸ªå¿ƒç†çŠ¶æ€å˜åŒ–ï¼Œè§‚å¯Ÿè¿›æ­¥è¶‹åŠ¿' }
                    ]
                }
            };

            return details[productId] || { features: [] };
        };

        // ==================== å·¥å…·å‡½æ•° ====================

        // åˆå§‹åŒ–æ•°æ®
        const initializeData = () => {
            if (!localStorage.getItem(STORAGE_KEYS.USERS)) {
                const initialUsers = [
                    {
                        id: 1,
                        username: 'admin',
                        password: 'admin888',
                        email: 'admin@yushuo.com',
                        role: 'admin',
                        tier: 'yearly',
                        status: 'active',
                        expiry: null,
                        specialPerms: ['emotion-table'],
                        createdAt: new Date().toISOString(),
                        lastLogin: new Date().toISOString()
                    }
                ];
                localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(initialUsers));
            }

            if (!localStorage.getItem(STORAGE_KEYS.ACTIVATION_CODES)) {
                const initialCodes = [
                    {
                        code: 'YS-M-DEMO',
                        type: 'monthly',
                        duration: 30,
                        products: ['learning-circle', 'sector-assistant'],
                        isUsed: false,
                        usedBy: null,
                        usedAt: null,
                        createdAt: new Date().toISOString(),
                        batchId: 'DEMO-001'
                    },
                    {
                        code: 'YS-Q-DEMO',
                        type: 'quarterly',
                        duration: 90,
                        products: ['learning-circle', 'sector-assistant', 'sector-rhythm'],
                        isUsed: false,
                        usedBy: null,
                        usedAt: null,
                        createdAt: new Date().toISOString(),
                        batchId: 'DEMO-001'
                    },
                    {
                        code: 'YS-Y-DEMO',
                        type: 'yearly',
                        duration: 365,
                        products: ['learning-circle', 'sector-assistant', 'sector-rhythm', 'review-system', 'psychology-test'],
                        isUsed: false,
                        usedBy: null,
                        usedAt: null,
                        createdAt: new Date().toISOString(),
                        batchId: 'DEMO-001'
                    },
                    {
                        code: 'YS-T-DEMO',
                        type: 'buyout-emotion',
                        duration: null,
                        products: ['emotion-table'],
                        isUsed: false,
                        usedBy: null,
                        usedAt: null,
                        createdAt: new Date().toISOString(),
                        batchId: 'DEMO-001'
                    }
                ];
                localStorage.setItem(STORAGE_KEYS.ACTIVATION_CODES, JSON.stringify(initialCodes));
            }
        };

        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒè®¿é—®æŸä¸ªäº§å“
        const hasProductAccess = (user, productId) => {
            if (!user) return false;
            if (user.role === 'admin') return true;
            if (user.status === 'paused') return false;

            const product = PRODUCTS[productId];
            if (!product) return false;

            // æ£€æŸ¥ä¹°æ–­æƒç›Š
            if (user.specialPerms && user.specialPerms.includes(productId)) return true;

            // æ£€æŸ¥ä¼šå‘˜æƒé™
            if (product.requiredTier.includes(user.tier)) {
                // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
                if (user.expiry) {
                    const now = new Date();
                    const expiryDate = new Date(user.expiry);
                    if (now > expiryDate) return false;
                }
                return true;
            }

            return false;
        };

        // è·å–ä¼šå‘˜ç­‰çº§æ˜¾ç¤ºåç§°
        const getTierDisplayName = (tier) => {
            const map = {
                guest: 'æ¸¸å®¢',
                monthly: 'æœˆè´¹ä¼šå‘˜',
                quarterly: 'å­£åº¦ä¼šå‘˜',
                yearly: 'å¹´è´¹ä¼šå‘˜'
            };
            return map[tier] || 'æœªçŸ¥';
        };

        // è·å–ä¼šå‘˜ç­‰çº§å¾½ç« é¢œè‰²
        const getTierBadgeColor = (tier) => {
            const map = {
                guest: 'bg-gray-100 text-gray-600',
                monthly: 'bg-blue-100 text-blue-600',
                quarterly: 'bg-purple-100 text-purple-600',
                yearly: 'bg-orange-100 text-orange-600'
            };
            return map[tier] || 'bg-gray-100 text-gray-600';
        };

        // æ›´æ–°ç”¨æˆ·æ•°æ®
        const updateUser = (updatedUser) => {
            const users = JSON.parse(localStorage.getItem(STORAGE_KEYS.USERS));
            const index = users.findIndex(u => u.id === updatedUser.id);
            if (index !== -1) {
                users[index] = updatedUser;
                localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(users));
                localStorage.setItem(STORAGE_KEYS.SESSION_USER, JSON.stringify(updatedUser));
            }
        };

        // æ¿€æ´»ç éªŒè¯ä¸æ¿€æ´»
        const activateCode = (user, codeInput) => {
            const codePattern = /^YS-[MQYT]-[A-Z0-9]{4}$/;
            if (!codePattern.test(codeInput)) {
                return { success: false, message: 'æ¿€æ´»ç æ ¼å¼é”™è¯¯' };
            }

            const codes = JSON.parse(localStorage.getItem(STORAGE_KEYS.ACTIVATION_CODES));
            const codeObj = codes.find(c => c.code === codeInput);

            if (!codeObj) {
                return { success: false, message: 'æ¿€æ´»ç ä¸å­˜åœ¨' };
            }

            if (codeObj.isUsed) {
                return { success: false, message: 'æ¿€æ´»ç å·²è¢«ä½¿ç”¨' };
            }

            let updatedUser = { ...user };

            if (codeObj.type === 'buyout-emotion') {
                if (!updatedUser.specialPerms.includes('emotion-table')) {
                    updatedUser.specialPerms.push('emotion-table');
                }
            } else {
                const tierMap = {
                    monthly: 'monthly',
                    quarterly: 'quarterly',
                    yearly: 'yearly'
                };

                const newTier = tierMap[codeObj.type];

                let newExpiry;
                if (user.expiry && new Date(user.expiry) > new Date()) {
                    newExpiry = new Date(user.expiry);
                    newExpiry.setDate(newExpiry.getDate() + codeObj.duration);
                } else {
                    newExpiry = new Date();
                    newExpiry.setDate(newExpiry.getDate() + codeObj.duration);
                }

                const tierPriority = { guest: 0, monthly: 1, quarterly: 2, yearly: 3 };
                if (tierPriority[newTier] >= (tierPriority[user.tier] || 0)) {
                    updatedUser.tier = newTier;
                }

                updatedUser.expiry = newExpiry.toISOString();
            }

            updateUser(updatedUser);

            codeObj.isUsed = true;
            codeObj.usedBy = user.id;
            codeObj.usedAt = new Date().toISOString();
            localStorage.setItem(STORAGE_KEYS.ACTIVATION_CODES, JSON.stringify(codes));

            return {
                success: true,
                message: 'æ¿€æ´»æˆåŠŸï¼',
                user: updatedUser
            };
        };

        // ==================== ç»„ä»¶å®šä¹‰ ====================

        // Toast æç¤ºç»„ä»¶
        const Toast = ({ message, type, onClose }) => {
            useEffect(() => {
                const timer = setTimeout(onClose, 3000);
                return () => clearTimeout(timer);
            }, []);

            const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';

            return (
                <div className={`fixed bottom-8 right-8 ${bgColor} text-white px-6 py-4 rounded-xl shadow-2xl animate-slide-in z-50 max-w-sm`}>
                    <div className="flex items-center gap-3">
                        <span className="text-xl">{type === 'success' ? 'âœ“' : 'âœ—'}</span>
                        <span>{message}</span>
                    </div>
                </div>
            );
        };

        // NavBar ç»„ä»¶
        const NavBar = ({ user, navigate, onLogout }) => {
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

            return (
                <nav className="glass-effect fixed w-full z-50 top-0 shadow-sm">
                    <div className="max-w-7xl mx-auto px-4 py-4">
                        <div className="flex items-center justify-between">
                            {/* Logo */}
                            <div
                                className="text-2xl font-bold text-brand-400 cursor-pointer flex items-center gap-2"
                                onClick={() => navigate('home')}
                            >
                                <span className="text-3xl">ğŸ¯</span>
                                <span>å®‡ç¡•çŸ­çº¿</span>
                            </div>

                            {/* Desktop Menu */}
                            <div className="hidden md:flex items-center gap-6">
                                <button
                                    onClick={() => navigate('home')}
                                    className="hover:text-brand-500 transition font-medium"
                                >
                                    é¦–é¡µ
                                </button>
                                {user && (
                                    <>
                                        <button
                                            onClick={() => navigate('profile')}
                                            className="hover:text-brand-500 transition font-medium"
                                        >
                                            ä¸ªäººä¸­å¿ƒ
                                        </button>
                                        {user.role === 'admin' && (
                                            <button
                                                onClick={() => navigate('admin')}
                                                className="hover:text-brand-500 transition font-medium"
                                            >
                                                ç®¡ç†åå°
                                            </button>
                                        )}
                                    </>
                                )}

                                {user ? (
                                    <div className="flex items-center gap-3">
                                        <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getTierBadgeColor(user.tier)}`}>
                                            {getTierDisplayName(user.tier)}
                                        </span>
                                        <div className="w-10 h-10 rounded-full bg-brand-500 text-white flex items-center justify-center font-bold cursor-pointer hover:bg-brand-600 transition">
                                            {user.username[0].toUpperCase()}
                                        </div>
                                        <button
                                            onClick={onLogout}
                                            className="text-gray-500 hover:text-red-500 transition text-sm"
                                        >
                                            é€€å‡º
                                        </button>
                                    </div>
                                ) : (
                                    <button
                                        onClick={() => navigate('auth', { mode: 'login' })}
                                        className="bg-brand-500 text-white px-6 py-2 rounded-full hover:bg-brand-600 transition font-semibold"
                                    >
                                        ç™»å½•
                                    </button>
                                )}
                            </div>

                            {/* Mobile Menu Button */}
                            <button
                                className="md:hidden text-2xl"
                                onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                            >
                                â˜°
                            </button>
                        </div>

                        {/* Mobile Menu */}
                        {mobileMenuOpen && (
                            <div className="md:hidden mt-4 pb-4 border-t pt-4 animate-fade-in">
                                <div className="flex flex-col gap-3">
                                    <button
                                        onClick={() => { navigate('home'); setMobileMenuOpen(false); }}
                                        className="text-left py-2 hover:text-brand-500 transition font-medium"
                                    >
                                        é¦–é¡µ
                                    </button>
                                    {user && (
                                        <>
                                            <button
                                                onClick={() => { navigate('profile'); setMobileMenuOpen(false); }}
                                                className="text-left py-2 hover:text-brand-500 transition font-medium"
                                            >
                                                ä¸ªäººä¸­å¿ƒ
                                            </button>
                                            {user.role === 'admin' && (
                                                <button
                                                    onClick={() => { navigate('admin'); setMobileMenuOpen(false); }}
                                                    className="text-left py-2 hover:text-brand-500 transition font-medium"
                                                >
                                                    ç®¡ç†åå°
                                                </button>
                                            )}
                                            <button
                                                onClick={() => { onLogout(); setMobileMenuOpen(false); }}
                                                className="text-left py-2 text-red-500 hover:text-red-600 transition font-medium"
                                            >
                                                é€€å‡ºç™»å½•
                                            </button>
                                        </>
                                    )}
                                    {!user && (
                                        <button
                                            onClick={() => { navigate('auth', { mode: 'login' }); setMobileMenuOpen(false); }}
                                            className="bg-brand-500 text-white px-6 py-3 rounded-xl hover:bg-brand-600 transition font-semibold"
                                        >
                                            ç™»å½•
                                        </button>
                                    )}
                                </div>
                            </div>
                        )}
                    </div>
                </nav>
            );
        };

        // Footer ç»„ä»¶
        const Footer = () => (
            <footer className="bg-gray-900 text-white py-8 mt-20">
                <div className="max-w-7xl mx-auto px-4 text-center">
                    <p className="text-lg font-semibold mb-2">å®‡ç¡•çŸ­çº¿ SaaS å¹³å°</p>
                    <p className="text-gray-400 text-sm">ä¸“ä¸šçš„é‡‘èæ•™è‚²å­¦ä¹ å¹³å° Â· åŠ©åŠ›çŸ­çº¿äº¤æ˜“æˆåŠŸ</p>
                    <p className="text-gray-500 text-xs mt-4">&copy; 2026 ç‰ˆæƒæ‰€æœ‰</p>
                </div>
            </footer>
        );

        // ProductCard ç»„ä»¶
        const ProductCard = ({ product, hasAccess, onClick }) => {
            const isSpecial = product.id === 'sector-assistant';
            const textClass = isSpecial ? 'text-white' : 'text-gray-900';
            const descClass = isSpecial ? 'text-gray-400' : 'text-gray-600';

            return (
                <div
                    onClick={onClick}
                    className={`product-card cursor-pointer ${product.color} rounded-3xl p-6 border ${product.borderColor} relative overflow-hidden shadow-card min-h-[220px] flex flex-col justify-between`}
                >
                    <div className="relative z-10">
                        <div className="flex items-center justify-between mb-4">
                            <h3 className={`text-2xl font-bold ${textClass}`}>{product.name}</h3>
                            <div className={`w-10 h-10 ${product.iconBg} rounded-xl flex items-center justify-center text-lg shadow-sm`}>
                                <span className={isSpecial ? 'text-green-400' : ''}>{product.icon}</span>
                            </div>
                        </div>
                        <p className={`${descClass} text-sm line-clamp-2 mb-3`}>{product.desc}</p>
                        <p className={`${product.textColor} font-semibold text-sm`}>{product.price}</p>
                    </div>

                    {hasAccess && (
                        <div className="relative z-10 mt-4">
                            <span className="bg-green-100 text-green-600 px-3 py-1 rounded-full text-xs font-semibold">
                                âœ“ å·²æ‹¥æœ‰
                            </span>
                        </div>
                    )}

                    <div className={`relative z-10 flex items-center ${product.textColor} font-bold text-sm mt-4`}>
                        æŸ¥çœ‹è¯¦æƒ… <span className="ml-2">â†’</span>
                    </div>
                </div>
            );
        };

        // è·¯ç”±ç»„ä»¶
        const Router = ({ page, params, user, navigate, showToast, setCurrentUser }) => {
            const pages = {
                'home': <HomePage user={user} navigate={navigate} />,
                'auth': <AuthPage mode={params.mode || 'login'} navigate={navigate} showToast={showToast} setCurrentUser={setCurrentUser} />,
                'profile': user ? <ProfilePage user={user} showToast={showToast} setCurrentUser={setCurrentUser} navigate={navigate} /> : null,
                'product': <ProductDetailPage productId={params.productId} user={user} navigate={navigate} showToast={showToast} />,
                'admin': (user && user.role === 'admin') ? <AdminDashboard user={user} showToast={showToast} /> : null
            };

            const currentPage = pages[page];

            if (!currentPage && page !== 'home') {
                navigate('home');
                return null;
            }

            return <div className="page-transition">{currentPage}</div>;
        };

        // HomePage ç»„ä»¶
        const HomePage = ({ user, navigate }) => {
            // åŠ¨æ€å¿«é€Ÿå…¥å£é…ç½®
            const quickAccessConfig = {
                monthly: [
                    { id: 'sector-assistant', name: 'âš¡ å¯åŠ¨æ¿å—åŠ©æ‰‹', icon: 'ğŸš€', color: 'from-green-400 to-green-600' }
                ],
                quarterly: [
                    { id: 'sector-rhythm', name: 'ğŸš€ å¯åŠ¨æ¿å—èŠ‚å¥ç³»ç»Ÿ', icon: 'ğŸ“Š', color: 'from-purple-400 to-purple-600' }
                ],
                yearly: [
                    { id: 'sector-rhythm', name: 'æ¿å—èŠ‚å¥ç³»ç»Ÿ', icon: 'ğŸ“Š', color: 'from-purple-400 to-purple-600' },
                    { id: 'review-system', name: 'å¤ç›˜ç³»ç»Ÿ', icon: 'ğŸ“', color: 'from-indigo-400 to-indigo-600' },
                    { id: 'psychology-test', name: 'å¿ƒç†æµ‹è¯„ç³»ç»Ÿ', icon: 'ğŸ§ ', color: 'from-teal-400 to-teal-600' }
                ]
            };

            const quickAccessItems = user && user.tier !== 'guest' ? quickAccessConfig[user.tier] || [] : [];

            return (
                <div className="min-h-screen bg-white pt-20">
                    {/* Hero Section */}
                    <div className="bg-gradient-to-br from-brand-50 to-brand-100 py-16 md:py-24">
                        <div className="max-w-7xl mx-auto px-4 text-center animate-fade-in">
                            <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/50 border border-brand-200 text-brand-600 text-xs font-bold mb-6">
                                <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                                SYSTEM V3.0 ONLINE
                            </div>

                            <h1 className="text-4xl md:text-6xl font-black text-gray-900 mb-6 leading-tight">
                                çœ‹é€å¸‚åœºæƒ…ç»ª<br />
                                <span className="bg-clip-text text-transparent bg-gradient-to-r from-brand-400 to-red-600">
                                    æ•æ‰çŸ­çº¿é¾™å¤´
                                </span>
                            </h1>

                            <p className="text-base md:text-xl text-gray-600 max-w-2xl mx-auto mb-8 leading-relaxed">
                                å…¨ç½‘ç²‰ä¸6W+ã€‚æ‹’ç»å†…å¹•ï¼Œåªä¿¡æ•°æ®ã€‚<br />
                                å…¨æ ˆå¼è¶…çŸ­å†›ç«åº“ï¼Œè¯·é€‰æ‹©å·¥å…·è¿›å…¥ã€‚
                            </p>

                            {!user && (
                                <button
                                    onClick={() => navigate('auth', { mode: 'register' })}
                                    className="bg-brand-500 text-white px-8 py-4 rounded-full text-lg font-bold hover:bg-brand-600 transition shadow-lg hover:shadow-xl transform hover:-translate-y-1"
                                >
                                    ç«‹å³å¼€å§‹ â†’
                                </button>
                            )}
                        </div>
                    </div>

                    {/* Dynamic Quick Access */}
                    {quickAccessItems.length > 0 && (
                        <div className="max-w-7xl mx-auto px-4 py-12">
                            <h2 className="text-2xl md:text-3xl font-bold mb-6 text-center">å¿«é€Ÿè®¿é—®</h2>
                            <div className={`grid grid-cols-1 ${quickAccessItems.length === 1 ? 'md:grid-cols-1 max-w-md mx-auto' : 'md:grid-cols-3'} gap-6`}>
                                {quickAccessItems.map(item => (
                                    <button
                                        key={item.id}
                                        onClick={() => navigate('product', { productId: item.id })}
                                        className={`bg-gradient-to-r ${item.color} text-white p-6 rounded-2xl text-xl font-semibold hover:scale-105 transition-transform shadow-lg`}
                                    >
                                        <span className="text-4xl mr-3">{item.icon}</span>
                                        {item.name}
                                    </button>
                                ))}
                            </div>
                        </div>
                    )}

                    {/* Product Grid */}
                    <div className="max-w-7xl mx-auto px-4 py-12">
                        <h2 className="text-2xl md:text-3xl font-bold mb-8 text-center">å…¨éƒ¨äº§å“</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            {Object.values(PRODUCTS).map(product => (
                                <ProductCard
                                    key={product.id}
                                    product={product}
                                    hasAccess={hasProductAccess(user, product.id)}
                                    onClick={() => navigate('product', { productId: product.id })}
                                />
                            ))}
                        </div>
                    </div>

                    {/* CTA Section */}
                    <div className="bg-gray-50 py-16">
                        <div className="max-w-4xl mx-auto px-4 text-center">
                            <h2 className="text-3xl font-bold mb-4">å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿ</h2>
                            <p className="text-gray-600 mb-8">åŠ å…¥å®‡ç¡•çŸ­çº¿ï¼Œå¼€å¯ä¸“ä¸šäº¤æ˜“ä¹‹è·¯</p>
                            {!user ? (
                                <button
                                    onClick={() => navigate('auth', { mode: 'register' })}
                                    className="bg-brand-500 text-white px-8 py-4 rounded-full text-lg font-bold hover:bg-brand-600 transition shadow-lg"
                                >
                                    ç«‹å³æ³¨å†Œ
                                </button>
                            ) : (
                                <button
                                    onClick={() => navigate('profile')}
                                    className="bg-brand-500 text-white px-8 py-4 rounded-full text-lg font-bold hover:bg-brand-600 transition shadow-lg"
                                >
                                    ç®¡ç†ä¼šå‘˜
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // ç”±äºä»£ç é•¿åº¦é™åˆ¶ï¼Œåç»­ç»„ä»¶å°†åœ¨ä¸‹ä¸€éƒ¨åˆ†ç»§ç»­...
        // AuthPage, ProfilePage, ProductDetailPage, AdminDashboard ç­‰ç»„ä»¶
        // å°†åœ¨æ¥ä¸‹æ¥çš„ä»£ç ä¸­æ·»åŠ 

        // ==================== ä¸»åº”ç”¨ ====================

        const App = () => {
            const [currentUser, setCurrentUser] = useState(null);
            const [currentPage, setCurrentPage] = useState('home');
            const [pageParams, setPageParams] = useState({});
            const [toast, setToast] = useState(null);

            useEffect(() => {
                initializeData();

                const sessionUser = localStorage.getItem(STORAGE_KEYS.SESSION_USER);
                if (sessionUser) {
                    const user = JSON.parse(sessionUser);
                    setCurrentUser(user);
                }
            }, []);

            const navigate = (page, params = {}) => {
                setCurrentPage(page);
                setPageParams(params);
                window.scrollTo(0, 0);
            };

            const showToast = (message, type = 'success') => {
                setToast({ message, type });
            };

            const handleLogout = () => {
                localStorage.removeItem(STORAGE_KEYS.SESSION_USER);
                setCurrentUser(null);
                navigate('home');
                showToast('å·²é€€å‡ºç™»å½•', 'success');
            };

            return (
                <div className="app">
                    <NavBar user={currentUser} navigate={navigate} onLogout={handleLogout} />
                    <Router
                        page={currentPage}
                        params={pageParams}
                        user={currentUser}
                        navigate={navigate}
                        showToast={showToast}
                        setCurrentUser={setCurrentUser}
                    />
                    <Footer />
                    {toast && <Toast message={toast.message} type={toast.type} onClose={() => setToast(null)} />}
                </div>
            );
        };

        // AuthPage ç»„ä»¶ - ç™»å½•/æ³¨å†Œ
        const AuthPage = ({ mode: initialMode, navigate, showToast, setCurrentUser }) => {
            const [authMode, setAuthMode] = useState(initialMode || 'login');
            const [formData, setFormData] = useState({
                username: '',
                password: '',
                confirmPassword: '',
                email: ''
            });

            const handleLogin = () => {
                if (!formData.username || !formData.password) {
                    showToast('è¯·å¡«å†™ç”¨æˆ·åå’Œå¯†ç ', 'error');
                    return;
                }

                const users = JSON.parse(localStorage.getItem(STORAGE_KEYS.USERS));
                const user = users.find(
                    u => u.username === formData.username && u.password === formData.password
                );

                if (!user) {
                    showToast('ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯', 'error');
                    return;
                }

                if (user.status === 'paused') {
                    showToast('è´¦å·å·²è¢«å†»ç»“ï¼Œè¯·è”ç³»ç®¡ç†å‘˜', 'error');
                    return;
                }

                user.lastLogin = new Date().toISOString();
                updateUser(user);

                setCurrentUser(user);
                localStorage.setItem(STORAGE_KEYS.SESSION_USER, JSON.stringify(user));
                showToast('ç™»å½•æˆåŠŸï¼', 'success');
                navigate('home');
            };

            const handleRegister = () => {
                if (!formData.username || !formData.password) {
                    showToast('è¯·å¡«å†™ç”¨æˆ·åå’Œå¯†ç ', 'error');
                    return;
                }

                if (formData.password !== formData.confirmPassword) {
                    showToast('ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´', 'error');
                    return;
                }

                if (formData.password.length < 6) {
                    showToast('å¯†ç é•¿åº¦è‡³å°‘6ä½', 'error');
                    return;
                }

                const users = JSON.parse(localStorage.getItem(STORAGE_KEYS.USERS));

                if (users.find(u => u.username === formData.username)) {
                    showToast('ç”¨æˆ·åå·²å­˜åœ¨', 'error');
                    return;
                }

                const newUser = {
                    id: Math.max(...users.map(u => u.id), 0) + 1,
                    username: formData.username,
                    password: formData.password,
                    email: formData.email,
                    role: 'member',
                    tier: 'guest',
                    status: 'active',
                    expiry: null,
                    specialPerms: [],
                    createdAt: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };

                users.push(newUser);
                localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(users));

                showToast('æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•', 'success');
                setAuthMode('login');
                setFormData({ username: formData.username, password: '', confirmPassword: '', email: '' });
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (authMode === 'login') {
                    handleLogin();
                } else {
                    handleRegister();
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-brand-50 to-brand-100 flex items-center justify-center pt-20 px-4">
                    <div className="bg-white rounded-3xl p-8 shadow-2xl max-w-md w-full animate-fade-in">
                        <div className="text-center mb-8">
                            <div className="text-5xl mb-4">ğŸ¯</div>
                            <h2 className="text-3xl font-bold text-gray-900 mb-2">
                                {authMode === 'login' ? 'æ¬¢è¿å›æ¥' : 'åˆ›å»ºè´¦å·'}
                            </h2>
                            <p className="text-gray-600">
                                {authMode === 'login' ? 'ç™»å½•æ‚¨çš„è´¦å·' : 'åŠ å…¥å®‡ç¡•çŸ­çº¿ç¤¾åŒº'}
                            </p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-gray-700 font-medium mb-2">ç”¨æˆ·å</label>
                                <input
                                    type="text"
                                    placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
                                    value={formData.username}
                                    onChange={(e) => setFormData({...formData, username: e.target.value})}
                                    className="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-brand-500 transition"
                                />
                            </div>

                            <div>
                                <label className="block text-gray-700 font-medium mb-2">å¯†ç </label>
                                <input
                                    type="password"
                                    placeholder="è¯·è¾“å…¥å¯†ç "
                                    value={formData.password}
                                    onChange={(e) => setFormData({...formData, password: e.target.value})}
                                    className="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-brand-500 transition"
                                />
                            </div>

                            {authMode === 'register' && (
                                <>
                                    <div>
                                        <label className="block text-gray-700 font-medium mb-2">ç¡®è®¤å¯†ç </label>
                                        <input
                                            type="password"
                                            placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç "
                                            value={formData.confirmPassword}
                                            onChange={(e) => setFormData({...formData, confirmPassword: e.target.value})}
                                            className="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-brand-500 transition"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-gray-700 font-medium mb-2">é‚®ç®±ï¼ˆå¯é€‰ï¼‰</label>
                                        <input
                                            type="email"
                                            placeholder="è¯·è¾“å…¥é‚®ç®±"
                                            value={formData.email}
                                            onChange={(e) => setFormData({...formData, email: e.target.value})}
                                            className="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-brand-500 transition"
                                        />
                                    </div>
                                </>
                            )}

                            <button
                                type="submit"
                                className="w-full bg-brand-500 text-white py-3 rounded-xl font-semibold hover:bg-brand-600 transition shadow-lg transform hover:-translate-y-0.5"
                            >
                                {authMode === 'login' ? 'ç™»å½•' : 'æ³¨å†Œ'}
                            </button>
                        </form>

                        <div className="mt-6 text-center">
                            <p className="text-gray-600">
                                {authMode === 'login' ? 'è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ' : 'å·²æœ‰è´¦å·ï¼Ÿ'}
                                <button
                                    onClick={() => {
                                        setAuthMode(authMode === 'login' ? 'register' : 'login');
                                        setFormData({ username: '', password: '', confirmPassword: '', email: '' });
                                    }}
                                    className="text-brand-500 ml-2 hover:underline font-semibold"
                                >
                                    {authMode === 'login' ? 'ç«‹å³æ³¨å†Œ' : 'å»ç™»å½•'}
                                </button>
                            </p>
                        </div>

                        {authMode === 'login' && (
                            <div className="mt-6 p-4 bg-blue-50 rounded-xl">
                                <p className="text-sm text-blue-800 font-semibold mb-2">ğŸ” æ¼”ç¤ºè´¦å·</p>
                                <p className="text-xs text-blue-600">
                                    ç”¨æˆ·å: admin<br />
                                    å¯†ç : admin888
                                </p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // ProfilePage ç»„ä»¶ - ä¸ªäººä¸­å¿ƒ
        const ProfilePage = ({ user, showToast, setCurrentUser, navigate }) => {
            const [activationCode, setActivationCode] = useState('');

            const handleActivate = () => {
                if (!activationCode.trim()) {
                    showToast('è¯·è¾“å…¥æ¿€æ´»ç ', 'error');
                    return;
                }

                const result = activateCode(user, activationCode.trim().toUpperCase());
                if (result.success) {
                    // æ›´æ–°å½“å‰ç”¨æˆ·çŠ¶æ€
                    setCurrentUser(result.user);
                    // åŒæ—¶æ›´æ–° LocalStorage çš„ sessionï¼ˆç¡®ä¿åˆ·æ–°åä»ä¿æŒï¼‰
                    localStorage.setItem(STORAGE_KEYS.SESSION_USER, JSON.stringify(result.user));
                    showToast(result.message, 'success');
                    setActivationCode('');
                    // å¼ºåˆ¶åˆ·æ–°é¡µé¢ä»¥ç¡®ä¿æ‰€æœ‰ç»„ä»¶éƒ½è·å–åˆ°æœ€æ–°æ•°æ®
                    setTimeout(() => {
                        window.location.reload();
                    }, 1000);
                } else {
                    showToast(result.message, 'error');
                }
            };

            const accessibleProducts = Object.values(PRODUCTS).filter(p => hasProductAccess(user, p.id));
            const daysLeft = user.expiry
                ? Math.ceil((new Date(user.expiry) - new Date()) / (1000 * 60 * 60 * 24))
                : null;

            const isExpired = user.expiry && new Date(user.expiry) < new Date();

            return (
                <div className="min-h-screen bg-gray-50 pt-24 pb-12 px-4">
                    <div className="max-w-4xl mx-auto">
                        {/* ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ */}
                        <div className="bg-white rounded-3xl p-8 shadow-lg mb-6 animate-fade-in">
                            <div className="flex flex-col md:flex-row items-center md:items-start justify-between gap-6 mb-6">
                                <div className="flex items-center gap-4">
                                    <div className="w-20 h-20 rounded-full bg-gradient-to-br from-brand-400 to-brand-600 text-white flex items-center justify-center text-3xl font-bold">
                                        {user.username[0].toUpperCase()}
                                    </div>
                                    <div>
                                        <h2 className="text-3xl font-bold text-gray-900">{user.username}</h2>
                                        <p className="text-gray-600">{user.email || 'æœªè®¾ç½®é‚®ç®±'}</p>
                                        <p className="text-xs text-gray-400 mt-1">
                                            åŠ å…¥äº {new Date(user.createdAt).toLocaleDateString('zh-CN')}
                                        </p>
                                    </div>
                                </div>
                                <span className={`px-4 py-2 rounded-full font-semibold text-lg ${getTierBadgeColor(user.tier)}`}>
                                    {getTierDisplayName(user.tier)}
                                </span>
                            </div>

                            {/* ä¼šå‘˜çŠ¶æ€ */}
                            {user.tier !== 'guest' && user.expiry && (
                                <div className={`${isExpired ? 'bg-red-50' : 'bg-brand-50'} rounded-xl p-4 mb-6`}>
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <p className="text-sm font-medium text-gray-700">ä¼šå‘˜åˆ°æœŸæ—¶é—´</p>
                                            <p className="text-xl font-bold text-gray-900">
                                                {new Date(user.expiry).toLocaleDateString('zh-CN', {
                                                    year: 'numeric',
                                                    month: 'long',
                                                    day: 'numeric'
                                                })}
                                            </p>
                                        </div>
                                        <div className="text-right">
                                            {isExpired ? (
                                                <p className="text-red-600 font-bold text-lg">å·²è¿‡æœŸ</p>
                                            ) : (
                                                <>
                                                    <p className="text-brand-600 font-bold text-2xl">{daysLeft}</p>
                                                    <p className="text-sm text-gray-600">å¤©ååˆ°æœŸ</p>
                                                </>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* æ¿€æ´»ç è¾“å…¥ */}
                            <div className="border-t pt-6">
                                <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                                    <span>ğŸ«</span>
                                    æ¿€æ´»ä¼šå‘˜
                                </h3>
                                <div className="flex flex-col md:flex-row gap-4">
                                    <input
                                        type="text"
                                        placeholder="è¯·è¾“å…¥æ¿€æ´»ç ï¼ˆå¦‚ï¼šYS-M-XXXXï¼‰"
                                        value={activationCode}
                                        onChange={(e) => setActivationCode(e.target.value.toUpperCase())}
                                        className="flex-1 px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-brand-500 transition font-mono"
                                        maxLength={11}
                                    />
                                    <button
                                        onClick={handleActivate}
                                        className="bg-brand-500 text-white px-8 py-3 rounded-xl font-semibold hover:bg-brand-600 transition shadow-lg"
                                    >
                                        æ¿€æ´»
                                    </button>
                                </div>
                                <p className="text-xs text-gray-500 mt-2">
                                    ğŸ’¡ æç¤ºï¼šæ¿€æ´»ç æ ¼å¼ä¸º YS-M/Q/Y/T-XXXX
                                </p>
                            </div>
                        </div>

                        {/* å·²æ‹¥æœ‰çš„äº§å“ */}
                        <div className="bg-white rounded-3xl p-8 shadow-lg animate-fade-in">
                            <h3 className="text-2xl font-bold mb-6 flex items-center gap-2">
                                <span>ğŸ“¦</span>
                                æˆ‘çš„äº§å“
                            </h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                {accessibleProducts.length > 0 ? (
                                    accessibleProducts.map(product => (
                                        <div
                                            key={product.id}
                                            onClick={() => navigate('product', { productId: product.id })}
                                            className="border border-gray-200 rounded-xl p-4 flex items-center justify-between hover:border-brand-400 hover:shadow-md transition cursor-pointer"
                                        >
                                            <div className="flex items-center gap-3">
                                                <div className={`w-12 h-12 ${product.iconBg} rounded-xl flex items-center justify-center text-2xl`}>
                                                    {product.icon}
                                                </div>
                                                <div>
                                                    <h4 className="font-semibold text-lg text-gray-900">{product.name}</h4>
                                                    <p className="text-gray-600 text-sm">{product.desc}</p>
                                                </div>
                                            </div>
                                            <div className="flex flex-col items-end gap-2">
                                                <span className="bg-green-100 text-green-600 px-3 py-1 rounded-full text-xs font-semibold">
                                                    âœ“ å·²æ‹¥æœ‰
                                                </span>
                                                {user.specialPerms.includes(product.id) && (
                                                    <span className="bg-purple-100 text-purple-600 px-2 py-0.5 rounded text-xs font-semibold">
                                                        ä¹°æ–­
                                                    </span>
                                                )}
                                            </div>
                                        </div>
                                    ))
                                ) : (
                                    <div className="col-span-2 text-center py-12">
                                        <div className="text-6xl mb-4">ğŸ“­</div>
                                        <p className="text-gray-500 text-lg mb-4">æš‚æ— å¯ç”¨äº§å“</p>
                                        <p className="text-gray-400 text-sm mb-6">æ¿€æ´»ä¼šå‘˜ç æˆ–è´­ä¹°äº§å“åå³å¯ä½¿ç”¨</p>
                                        <button
                                            onClick={() => navigate('home')}
                                            className="bg-brand-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-brand-600 transition"
                                        >
                                            æµè§ˆäº§å“
                                        </button>
                                    </div>
                                )}
                            </div>

                            {/* æ¼”ç¤ºæ¿€æ´»ç æç¤º */}
                            {user.tier === 'guest' && (
                                <div className="mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200">
                                    <p className="text-sm text-blue-800 font-semibold mb-2">ğŸ æ¼”ç¤ºæ¿€æ´»ç </p>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-blue-600 font-mono">
                                        <div>æœˆè´¹: YS-M-DEMO</div>
                                        <div>å­£åº¦: YS-Q-DEMO</div>
                                        <div>å¹´è´¹: YS-Y-DEMO</div>
                                        <div>ä¹°æ–­: YS-T-DEMO</div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // ProductDetailPage ç»„ä»¶ - äº§å“è¯¦æƒ…é¡µ
        const ProductDetailPage = ({ productId, user, navigate, showToast }) => {
            const product = PRODUCTS[productId];
            const hasAccess = hasProductAccess(user, productId);
            const productDetails = getProductDetails(productId);

            if (!product) {
                return (
                    <div className="min-h-screen flex items-center justify-center pt-20">
                        <div className="text-center">
                            <div className="text-6xl mb-4">â“</div>
                            <h2 className="text-3xl font-bold mb-4">äº§å“ä¸å­˜åœ¨</h2>
                            <button
                                onClick={() => navigate('home')}
                                className="bg-brand-500 text-white px-6 py-3 rounded-xl hover:bg-brand-600 transition"
                            >
                                è¿”å›é¦–é¡µ
                            </button>
                        </div>
                    </div>
                );
            }

            const handleCTA = () => {
                if (!user) {
                    navigate('auth', { mode: 'login' });
                    return;
                }

                if (hasAccess) {
                    showToast(`æ­£åœ¨å¯åŠ¨ ${product.name}...`, 'success');
                } else {
                    navigate('profile');
                }
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Hero Section */}
                    <div className={`bg-gradient-to-br ${product.id === 'sector-assistant' ? 'from-gray-900 to-gray-700' : 'from-brand-400 to-brand-600'} text-white py-20 pt-32`}>
                        <div className="max-w-7xl mx-auto px-4 text-center animate-fade-in">
                            <div className="text-6xl mb-6">{product.icon}</div>
                            <h1 className="text-4xl md:text-5xl font-bold mb-4">{product.name}</h1>
                            <p className="text-xl md:text-2xl mb-6 opacity-90">{product.desc}</p>
                            <div className="inline-block bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full">
                                <p className="text-2xl font-bold">{product.price}</p>
                            </div>
                        </div>
                    </div>

                    {/* Feature List */}
                    <div className="max-w-4xl mx-auto px-4 py-12">
                        {/* è§†é¢‘é“¾æ¥ï¼ˆä»…æƒ…ç»ªè¡¨æ ¼ï¼‰ */}
                        {productDetails.videoUrl && (
                            <div className="bg-gradient-to-r from-blue-50 to-blue-100 rounded-3xl p-6 shadow-lg mb-8 animate-fade-in border border-blue-200">
                                <div className="flex items-center justify-between flex-wrap gap-4">
                                    <div className="flex items-center gap-3">
                                        <div className="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center text-white text-2xl">
                                            ğŸ¬
                                        </div>
                                        <div>
                                            <h3 className="font-bold text-gray-900 text-lg">è§†é¢‘æ•™ç¨‹</h3>
                                            <p className="text-gray-600 text-sm">{productDetails.videoTitle}</p>
                                        </div>
                                    </div>
                                    <a
                                        href={productDetails.videoUrl}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        className="bg-blue-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-600 transition shadow-lg inline-flex items-center gap-2"
                                    >
                                        <span>è§‚çœ‹è§†é¢‘</span>
                                        <span>â†’</span>
                                    </a>
                                </div>
                            </div>
                        )}

                        <div className="bg-white rounded-3xl p-8 shadow-lg mb-8 animate-fade-in">
                            <h2 className="text-3xl font-bold mb-8 text-center">æ ¸å¿ƒåŠŸèƒ½</h2>
                            <div className="space-y-8">
                                {productDetails.features.map((feature, index) => (
                                    <div key={index} className="border-b border-gray-100 pb-8 last:border-b-0 last:pb-0">
                                        <div className="flex items-start gap-4 mb-4">
                                            <div className="text-4xl flex-shrink-0">{feature.icon}</div>
                                            <div className="flex-1">
                                                <h3 className="font-bold text-xl text-gray-900 mb-2">{feature.title}</h3>
                                                <p className="text-gray-600 leading-relaxed">{feature.desc}</p>
                                            </div>
                                        </div>
                                        {/* æ˜¾ç¤ºå›¾ç‰‡ï¼ˆå¦‚æœæœ‰ï¼‰ */}
                                        {feature.image && (
                                            <div className="mt-4 ml-14 rounded-xl overflow-hidden border border-gray-200 shadow-sm hover:shadow-md transition">
                                                <img
                                                    src={feature.image}
                                                    alt={feature.title}
                                                    className="w-full h-auto cursor-pointer hover:scale-105 transition-transform duration-300"
                                                    onClick={() => window.open(feature.image, '_blank')}
                                                    loading="lazy"
                                                />
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* CTA Section */}
                        <div className="bg-white rounded-3xl p-8 shadow-lg text-center animate-fade-in">
                            {hasAccess ? (
                                <div>
                                    <div className="mb-6">
                                        <span className="bg-green-100 text-green-600 px-4 py-2 rounded-full font-semibold inline-block">
                                            âœ“ æ‚¨å·²æ‹¥æœ‰æ­¤äº§å“
                                        </span>
                                    </div>
                                    <button
                                        onClick={handleCTA}
                                        className="bg-green-500 text-white px-12 py-4 rounded-full text-xl font-bold hover:bg-green-600 transition shadow-lg transform hover:-translate-y-1"
                                    >
                                        ç«‹å³ä½¿ç”¨
                                    </button>
                                    <p className="text-gray-500 text-sm mt-4">ç‚¹å‡»å¯åŠ¨äº§å“åŠŸèƒ½</p>
                                </div>
                            ) : (
                                <div>
                                    <p className="text-gray-600 mb-6 text-lg">æ‚¨æš‚æ— æƒé™è®¿é—®æ­¤äº§å“</p>
                                    {user ? (
                                        <>
                                            <button
                                                onClick={handleCTA}
                                                className="bg-brand-500 text-white px-12 py-4 rounded-full text-xl font-bold hover:bg-brand-600 transition shadow-lg transform hover:-translate-y-1"
                                            >
                                                æ¿€æ´»ä¼šå‘˜
                                            </button>
                                            <p className="text-gray-500 text-sm mt-4">
                                                å‰å¾€ä¸ªäººä¸­å¿ƒæ¿€æ´»ä¼šå‘˜ç æˆ–å‡çº§å¥—é¤
                                            </p>
                                        </>
                                    ) : (
                                        <>
                                            <button
                                                onClick={handleCTA}
                                                className="bg-brand-500 text-white px-12 py-4 rounded-full text-xl font-bold hover:bg-brand-600 transition shadow-lg transform hover:-translate-y-1"
                                            >
                                                ç™»å½•åä½¿ç”¨
                                            </button>
                                            <p className="text-gray-500 text-sm mt-4">
                                                ç™»å½•åå³å¯æ¿€æ´»ä¼šå‘˜ä½¿ç”¨æ­¤äº§å“
                                            </p>
                                        </>
                                    )}
                                </div>
                            )}

                            <div className="mt-8 pt-8 border-t border-gray-200">
                                <button
                                    onClick={() => navigate('home')}
                                    className="text-gray-600 hover:text-brand-500 transition"
                                >
                                    â† è¿”å›é¦–é¡µ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // AdminDashboard ç»„ä»¶ - åå°ç®¡ç†ç³»ç»Ÿ
        const AdminDashboard = ({ user, showToast }) => {
            const [activeTab, setActiveTab] = useState('codes');
            const [codeType, setCodeType] = useState('monthly');
            const [quantity, setQuantity] = useState(10);
            const [users, setUsers] = useState([]);
            const [codes, setCodes] = useState([]);

            useEffect(() => {
                loadData();
            }, []);

            const loadData = () => {
                const storedUsers = JSON.parse(localStorage.getItem(STORAGE_KEYS.USERS));
                const storedCodes = JSON.parse(localStorage.getItem(STORAGE_KEYS.ACTIVATION_CODES));
                setUsers(storedUsers || []);
                setCodes(storedCodes || []);
            };

            const handleGenerateCodes = () => {
                const typeConfig = {
                    monthly: { prefix: 'M', duration: 30, products: ['learning-circle', 'sector-assistant'] },
                    quarterly: { prefix: 'Q', duration: 90, products: ['learning-circle', 'sector-assistant', 'sector-rhythm'] },
                    yearly: { prefix: 'Y', duration: 365, products: ['learning-circle', 'sector-assistant', 'sector-rhythm', 'review-system', 'psychology-test'] },
                    'buyout-emotion': { prefix: 'T', duration: null, products: ['emotion-table'] }
                };

                const config = typeConfig[codeType];
                const batchId = `BATCH-${Date.now()}`;
                const newCodes = [];
                const allCodes = [...codes];

                for (let i = 0; i < quantity; i++) {
                    const randomStr = Math.random().toString(36).substring(2, 6).toUpperCase();
                    const code = {
                        code: `YS-${config.prefix}-${randomStr}`,
                        type: codeType,
                        duration: config.duration,
                        products: config.products,
                        isUsed: false,
                        usedBy: null,
                        usedAt: null,
                        createdAt: new Date().toISOString(),
                        batchId: batchId
                    };
                    newCodes.push(code);
                    allCodes.push(code);
                }

                localStorage.setItem(STORAGE_KEYS.ACTIVATION_CODES, JSON.stringify(allCodes));
                setCodes(allCodes);
                showToast(`æˆåŠŸç”Ÿæˆ ${quantity} ä¸ªæ¿€æ´»ç `, 'success');

                // ä¸‹è½½æ¿€æ´»ç 
                const text = newCodes.map(c => c.code).join('\n');
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `activation-codes-${batchId}.txt`;
                a.click();
            };

            const handleToggleUserStatus = (userId) => {
                const updatedUsers = users.map(u => {
                    if (u.id === userId) {
                        return { ...u, status: u.status === 'active' ? 'paused' : 'active' };
                    }
                    return u;
                });

                localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(updatedUsers));
                setUsers(updatedUsers);
                showToast('ç”¨æˆ·çŠ¶æ€å·²æ›´æ–°', 'success');
            };

            const handleExtendMembership = (userId, days) => {
                const updatedUsers = users.map(u => {
                    if (u.id === userId) {
                        let newExpiry;
                        if (u.expiry && new Date(u.expiry) > new Date()) {
                            newExpiry = new Date(u.expiry);
                        } else {
                            newExpiry = new Date();
                        }
                        newExpiry.setDate(newExpiry.getDate() + days);
                        return { ...u, expiry: newExpiry.toISOString() };
                    }
                    return u;
                });

                localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(updatedUsers));
                setUsers(updatedUsers);
                showToast(`å·²ä¸ºç”¨æˆ·å»¶é•¿ ${days} å¤©ä¼šå‘˜`, 'success');
            };

            // ç»Ÿè®¡æ•°æ®
            const stats = {
                totalUsers: users.length,
                activeUsers: users.filter(u => u.status === 'active').length,
                monthlyMembers: users.filter(u => u.tier === 'monthly').length,
                quarterlyMembers: users.filter(u => u.tier === 'quarterly').length,
                yearlyMembers: users.filter(u => u.tier === 'yearly').length,
                totalCodes: codes.length,
                usedCodes: codes.filter(c => c.isUsed).length,
                unusedCodes: codes.filter(c => !c.isUsed).length
            };

            return (
                <div className="min-h-screen bg-gray-50 pt-24 pb-12 px-4">
                    <div className="max-w-6xl mx-auto">
                        <div className="mb-8 animate-fade-in">
                            <h1 className="text-4xl font-bold mb-2">ç®¡ç†åå°</h1>
                            <p className="text-gray-600">æ¬¢è¿å›æ¥ï¼Œ{user.username}</p>
                        </div>

                        {/* Tab Navigation */}
                        <div className="bg-white rounded-3xl p-2 shadow-lg mb-8 flex gap-2 overflow-x-auto animate-fade-in">
                            <button
                                onClick={() => setActiveTab('codes')}
                                className={`flex-1 py-3 px-6 rounded-xl font-semibold transition whitespace-nowrap ${activeTab === 'codes' ? 'bg-brand-500 text-white' : 'text-gray-600 hover:bg-gray-100'}`}
                            >
                                æ¿€æ´»ç ç®¡ç†
                            </button>
                            <button
                                onClick={() => setActiveTab('users')}
                                className={`flex-1 py-3 px-6 rounded-xl font-semibold transition whitespace-nowrap ${activeTab === 'users' ? 'bg-brand-500 text-white' : 'text-gray-600 hover:bg-gray-100'}`}
                            >
                                ä¼šå‘˜ç®¡ç†
                            </button>
                            <button
                                onClick={() => setActiveTab('stats')}
                                className={`flex-1 py-3 px-6 rounded-xl font-semibold transition whitespace-nowrap ${activeTab === 'stats' ? 'bg-brand-500 text-white' : 'text-gray-600 hover:bg-gray-100'}`}
                            >
                                æ•°æ®ç»Ÿè®¡
                            </button>
                        </div>

                        {/* Tab Content */}
                        {activeTab === 'codes' && (
                            <div className="space-y-6 animate-fade-in">
                                {/* ç”Ÿæˆæ¿€æ´»ç  */}
                                <div className="bg-white rounded-3xl p-8 shadow-lg">
                                    <h2 className="text-2xl font-bold mb-6">ç”Ÿæˆæ¿€æ´»ç </h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label className="block text-gray-700 font-medium mb-2">æ¿€æ´»ç ç±»å‹</label>
                                            <select
                                                value={codeType}
                                                onChange={(e) => setCodeType(e.target.value)}
                                                className="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-brand-500 transition"
                                            >
                                                <option value="monthly">æœˆè´¹ä¼šå‘˜ï¼ˆ30å¤©ï¼‰</option>
                                                <option value="quarterly">å­£åº¦ä¼šå‘˜ï¼ˆ90å¤©ï¼‰</option>
                                                <option value="yearly">å¹´è´¹ä¼šå‘˜ï¼ˆ365å¤©ï¼‰</option>
                                                <option value="buyout-emotion">æƒ…ç»ªè¡¨æ ¼ï¼ˆä¹°æ–­ï¼‰</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-gray-700 font-medium mb-2">ç”Ÿæˆæ•°é‡</label>
                                            <input
                                                type="number"
                                                value={quantity}
                                                onChange={(e) => setQuantity(Math.max(1, Math.min(100, parseInt(e.target.value) || 1)))}
                                                min="1"
                                                max="100"
                                                className="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-brand-500 transition"
                                            />
                                        </div>
                                    </div>
                                    <button
                                        onClick={handleGenerateCodes}
                                        className="w-full mt-6 bg-brand-500 text-white py-3 rounded-xl font-semibold hover:bg-brand-600 transition shadow-lg"
                                    >
                                        ç”Ÿæˆå¹¶ä¸‹è½½æ¿€æ´»ç 
                                    </button>
                                </div>

                                {/* æ¿€æ´»ç åˆ—è¡¨ */}
                                <div className="bg-white rounded-3xl p-8 shadow-lg">
                                    <h3 className="text-xl font-bold mb-4">æœ€è¿‘ç”Ÿæˆçš„æ¿€æ´»ç </h3>
                                    <div className="overflow-x-auto">
                                        <table className="w-full">
                                            <thead className="bg-gray-50">
                                                <tr>
                                                    <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">æ¿€æ´»ç </th>
                                                    <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">ç±»å‹</th>
                                                    <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">çŠ¶æ€</th>
                                                    <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">ç”Ÿæˆæ—¶é—´</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-gray-200">
                                                {codes.slice(-10).reverse().map((code, index) => (
                                                    <tr key={index} className="hover:bg-gray-50">
                                                        <td className="px-4 py-3 font-mono text-sm">{code.code}</td>
                                                        <td className="px-4 py-3 text-sm">
                                                            <span className={`px-2 py-1 rounded-full text-xs font-semibold ${
                                                                code.type === 'monthly' ? 'bg-blue-100 text-blue-600' :
                                                                code.type === 'quarterly' ? 'bg-purple-100 text-purple-600' :
                                                                code.type === 'yearly' ? 'bg-orange-100 text-orange-600' :
                                                                'bg-green-100 text-green-600'
                                                            }`}>
                                                                {code.type === 'monthly' ? 'æœˆè´¹' :
                                                                 code.type === 'quarterly' ? 'å­£åº¦' :
                                                                 code.type === 'yearly' ? 'å¹´è´¹' :
                                                                 'ä¹°æ–­'}
                                                            </span>
                                                        </td>
                                                        <td className="px-4 py-3 text-sm">
                                                            {code.isUsed ? (
                                                                <span className="text-gray-500">å·²ä½¿ç”¨</span>
                                                            ) : (
                                                                <span className="text-green-600 font-semibold">æœªä½¿ç”¨</span>
                                                            )}
                                                        </td>
                                                        <td className="px-4 py-3 text-sm text-gray-600">
                                                            {new Date(code.createdAt).toLocaleString('zh-CN')}
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'users' && (
                            <div className="bg-white rounded-3xl p-8 shadow-lg animate-fade-in">
                                <h2 className="text-2xl font-bold mb-6">ä¼šå‘˜ç®¡ç†</h2>
                                <div className="overflow-x-auto">
                                    <table className="w-full">
                                        <thead className="bg-gray-50">
                                            <tr>
                                                <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">ç”¨æˆ·å</th>
                                                <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">ç­‰çº§</th>
                                                <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">åˆ°æœŸæ—¶é—´</th>
                                                <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">çŠ¶æ€</th>
                                                <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">æ“ä½œ</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y divide-gray-200">
                                            {users.map((u) => (
                                                <tr key={u.id} className="hover:bg-gray-50">
                                                    <td className="px-4 py-3">
                                                        <div>
                                                            <p className="font-semibold text-gray-900">{u.username}</p>
                                                            <p className="text-xs text-gray-500">{u.email || 'æ— é‚®ç®±'}</p>
                                                        </div>
                                                    </td>
                                                    <td className="px-4 py-3">
                                                        <span className={`px-2 py-1 rounded-full text-xs font-semibold ${getTierBadgeColor(u.tier)}`}>
                                                            {getTierDisplayName(u.tier)}
                                                        </span>
                                                    </td>
                                                    <td className="px-4 py-3 text-sm text-gray-600">
                                                        {u.expiry ? new Date(u.expiry).toLocaleDateString('zh-CN') : 'æ— æœŸé™'}
                                                    </td>
                                                    <td className="px-4 py-3">
                                                        <span className={`px-2 py-1 rounded-full text-xs font-semibold ${
                                                            u.status === 'active' ? 'bg-green-100 text-green-600' : 'bg-red-100 text-red-600'
                                                        }`}>
                                                            {u.status === 'active' ? 'æ­£å¸¸' : 'å†»ç»“'}
                                                        </span>
                                                    </td>
                                                    <td className="px-4 py-3">
                                                        <div className="flex gap-2">
                                                            <button
                                                                onClick={() => handleToggleUserStatus(u.id)}
                                                                className={`px-3 py-1 rounded-lg text-xs font-semibold transition ${
                                                                    u.status === 'active'
                                                                        ? 'bg-red-100 text-red-600 hover:bg-red-200'
                                                                        : 'bg-green-100 text-green-600 hover:bg-green-200'
                                                                }`}
                                                            >
                                                                {u.status === 'active' ? 'å†»ç»“' : 'è§£å†»'}
                                                            </button>
                                                            <button
                                                                onClick={() => handleExtendMembership(u.id, 30)}
                                                                className="px-3 py-1 rounded-lg text-xs font-semibold bg-blue-100 text-blue-600 hover:bg-blue-200 transition"
                                                            >
                                                                +30å¤©
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}

                        {activeTab === 'stats' && (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in">
                                <div className="bg-white rounded-3xl p-6 shadow-lg">
                                    <div className="flex items-center justify-between mb-4">
                                        <h3 className="text-gray-600 font-medium">æ€»ç”¨æˆ·æ•°</h3>
                                        <div className="text-3xl">ğŸ‘¥</div>
                                    </div>
                                    <p className="text-4xl font-bold text-gray-900">{stats.totalUsers}</p>
                                    <p className="text-sm text-gray-500 mt-2">æ´»è·ƒ: {stats.activeUsers}</p>
                                </div>

                                <div className="bg-white rounded-3xl p-6 shadow-lg">
                                    <div className="flex items-center justify-between mb-4">
                                        <h3 className="text-gray-600 font-medium">æœˆè´¹ä¼šå‘˜</h3>
                                        <div className="text-3xl">ğŸ“…</div>
                                    </div>
                                    <p className="text-4xl font-bold text-blue-600">{stats.monthlyMembers}</p>
                                </div>

                                <div className="bg-white rounded-3xl p-6 shadow-lg">
                                    <div className="flex items-center justify-between mb-4">
                                        <h3 className="text-gray-600 font-medium">å­£åº¦ä¼šå‘˜</h3>
                                        <div className="text-3xl">ğŸ¯</div>
                                    </div>
                                    <p className="text-4xl font-bold text-purple-600">{stats.quarterlyMembers}</p>
                                </div>

                                <div className="bg-white rounded-3xl p-6 shadow-lg">
                                    <div className="flex items-center justify-between mb-4">
                                        <h3 className="text-gray-600 font-medium">å¹´è´¹ä¼šå‘˜</h3>
                                        <div className="text-3xl">â­</div>
                                    </div>
                                    <p className="text-4xl font-bold text-orange-600">{stats.yearlyMembers}</p>
                                </div>

                                <div className="bg-white rounded-3xl p-6 shadow-lg">
                                    <div className="flex items-center justify-between mb-4">
                                        <h3 className="text-gray-600 font-medium">æ€»æ¿€æ´»ç </h3>
                                        <div className="text-3xl">ğŸ«</div>
                                    </div>
                                    <p className="text-4xl font-bold text-gray-900">{stats.totalCodes}</p>
                                    <p className="text-sm text-gray-500 mt-2">å·²ä½¿ç”¨: {stats.usedCodes}</p>
                                </div>

                                <div className="bg-white rounded-3xl p-6 shadow-lg">
                                    <div className="flex items-center justify-between mb-4">
                                        <h3 className="text-gray-600 font-medium">ä½¿ç”¨ç‡</h3>
                                        <div className="text-3xl">ğŸ“Š</div>
                                    </div>
                                    <p className="text-4xl font-bold text-green-600">
                                        {stats.totalCodes > 0 ? Math.round((stats.usedCodes / stats.totalCodes) * 100) : 0}%
                                    </p>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // ==================== æ¸²æŸ“ ====================

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
